# è‚¡å¥æª¢å°ˆæ¡ˆè…³æœ¬å·¥å…·

é€™å€‹ç›®éŒ„åŒ…å«äº†è‚¡å¥æª¢å°ˆæ¡ˆçš„å„ç¨®è‡ªå‹•åŒ–è…³æœ¬ï¼Œç¾åœ¨å·²å…¨é¢å‡ç´šç‚º TypeScript ç‰ˆæœ¬ã€‚

## ğŸ“ ç›®éŒ„çµæ§‹

```
scripts/
â”œâ”€â”€ deploy/          # éƒ¨ç½²ç›¸é—œè…³æœ¬
â”‚   â”œâ”€â”€ deploy.ts    # Firebase éƒ¨ç½²è…³æœ¬
â”‚   â””â”€â”€ deploy.sh    # Shell éƒ¨ç½²è…³æœ¬
â”œâ”€â”€ dev/             # é–‹ç™¼ç’°å¢ƒè…³æœ¬
â”‚   â”œâ”€â”€ start.ts     # æœ¬åœ°é–‹ç™¼ç’°å¢ƒå•Ÿå‹•
â”‚   â”œâ”€â”€ structure.ts # å°ˆæ¡ˆçµæ§‹åˆ†æ
â”‚   â””â”€â”€ start.sh     # Shell å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ test/            # æ¸¬è©¦è…³æœ¬
â”‚   â”œâ”€â”€ local.ts     # æœ¬åœ°åŠŸèƒ½æ¸¬è©¦
â”‚   â”œâ”€â”€ api.ts       # API ç«¯é»æ¸¬è©¦
â”‚   â”œâ”€â”€ stock.ts     # è‚¡ç¥¨æœå‹™æ¸¬è©¦
â”‚   â”œâ”€â”€ etf-debug.ts # ETF æŸ¥è©¢é™¤éŒ¯
â”‚   â””â”€â”€ local.sh     # Shell æ¸¬è©¦è…³æœ¬
â”œâ”€â”€ ci/              # CI/CD è…³æœ¬
â”‚   â”œâ”€â”€ check.ts     # å“è³ªæª¢æŸ¥è…³æœ¬
â”‚   â”œâ”€â”€ check.sh     # Shell æª¢æŸ¥è…³æœ¬
â”‚   â””â”€â”€ stats.json   # çµ±è¨ˆè³‡æ–™
â”œâ”€â”€ package.json     # è…³æœ¬ä¾è³´ç®¡ç†
â”œâ”€â”€ tsconfig.json    # TypeScript é…ç½®
â””â”€â”€ README.md        # èªªæ˜æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å®‰è£ä¾è³´

```bash
cd scripts
npm install
```

### ç·¨è­¯ TypeScript

```bash
npm run build
```

### åŸ·è¡Œè…³æœ¬

```bash
# éƒ¨ç½²åˆ° Firebase
npm run deploy

# å•Ÿå‹•æœ¬åœ°é–‹ç™¼ç’°å¢ƒ
npm run dev:start

# åˆ†æå°ˆæ¡ˆçµæ§‹
npm run dev:structure

# åŸ·è¡Œæœ¬åœ°æ¸¬è©¦
npm run test:local

# æ¸¬è©¦ API ç«¯é»
npm run test:api

# æ¸¬è©¦è‚¡ç¥¨æœå‹™
npm run test:stock

# ETF é™¤éŒ¯æ¸¬è©¦
npm run test:etf-debug

# CI å“è³ªæª¢æŸ¥
npm run ci:check
```

## ğŸ“‹ è…³æœ¬èªªæ˜

### éƒ¨ç½²è…³æœ¬ (deploy/)

- **deploy.ts**: Firebase Functions éƒ¨ç½²è…³æœ¬
  - æª¢æŸ¥ Firebase ç™»å…¥ç‹€æ…‹
  - åŸ·è¡Œå“è³ªæª¢æŸ¥
  - éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ

### é–‹ç™¼è…³æœ¬ (dev/)

- **start.ts**: æœ¬åœ°é–‹ç™¼ç’°å¢ƒå•Ÿå‹•
  - å•Ÿå‹• Firebase æ¨¡æ“¬å™¨
  - è¨­å®šé–‹ç™¼ç’°å¢ƒè®Šæ•¸

- **structure.ts**: å°ˆæ¡ˆçµæ§‹åˆ†æ
  - é¡¯ç¤ºå°ˆæ¡ˆç›®éŒ„çµæ§‹
  - æª¢æŸ¥æª”æ¡ˆçµ„ç¹”

### æ¸¬è©¦è…³æœ¬ (test/)

- **local.ts**: æœ¬åœ°åŠŸèƒ½æ¸¬è©¦
  - åŸ·è¡Œå®Œæ•´çš„æœ¬åœ°æ¸¬è©¦æµç¨‹
  - é©—è­‰åŸºæœ¬åŠŸèƒ½

- **api.ts**: API ç«¯é»æ¸¬è©¦
  - æ¸¬è©¦å¥åº·æª¢æŸ¥ç«¯é»
  - æ¸¬è©¦è‚¡ç¥¨æŸ¥è©¢ API
  - æ¸¬è©¦ ETF æŸ¥è©¢ API

- **stock.ts**: è‚¡ç¥¨æœå‹™æ¸¬è©¦
  - æ¸¬è©¦å°ç©é›» (2330.TW)
  - æ¸¬è©¦å…ƒå¤§å°ç£50 (0050.TW)
  - æ¸¬è©¦å…ƒå¤§é«˜è‚¡æ¯ (0056.TW)

- **etf-debug.ts**: ETF æŸ¥è©¢é™¤éŒ¯
  - æ¸¬è©¦ä¸åŒè‚¡ç¥¨ä»£ç¢¼æ ¼å¼
  - é©—è­‰ Yahoo Finance API å›æ‡‰

### CI è…³æœ¬ (ci/)

- **check.ts**: å“è³ªæª¢æŸ¥
  - åŸ·è¡Œç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥
  - é©—è­‰å»ºç½®æµç¨‹

## ğŸ”§ é–‹ç™¼å·¥å…·

### TypeScript é…ç½®

- åš´æ ¼æ¨¡å¼å•Ÿç”¨
- ES2022 ç›®æ¨™
- å®Œæ•´çš„é¡å‹æª¢æŸ¥
- æºç¢¼æ˜ å°„æ”¯æ´

### ç¨‹å¼ç¢¼å“è³ª

```bash
# ç¨‹å¼ç¢¼æª¢æŸ¥
npm run lint

# è‡ªå‹•ä¿®å¾©
npm run lint:fix

# ç¨‹å¼ç¢¼æ ¼å¼åŒ–
npm run format

# æª¢æŸ¥æ ¼å¼åŒ–
npm run format:check
```

## ğŸ“¦ ä¾è³´ç®¡ç†

### é–‹ç™¼ä¾è³´

- `@types/node`: Node.js é¡å‹å®šç¾©
- `typescript`: TypeScript ç·¨è­¯å™¨
- `ts-node`: TypeScript åŸ·è¡Œç’°å¢ƒ
- `eslint`: ç¨‹å¼ç¢¼æª¢æŸ¥å·¥å…·
- `prettier`: ç¨‹å¼ç¢¼æ ¼å¼åŒ–å·¥å…·

### åŸ·è¡Œä¾è³´

- `dotenv`: ç’°å¢ƒè®Šæ•¸ç®¡ç†
- `yahoo-finance2`: Yahoo Finance API

## ğŸ¯ ä½¿ç”¨ç¯„ä¾‹

### éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ

```bash
cd scripts
npm run deploy
```

### æœ¬åœ°é–‹ç™¼æ¸¬è©¦

```bash
cd scripts
npm run dev:start
npm run test:api
```

### è‚¡ç¥¨æœå‹™æ¸¬è©¦

```bash
cd scripts
npm run test:stock
```

## ğŸ” é™¤éŒ¯

### å¸¸è¦‹å•é¡Œ

1. **TypeScript ç·¨è­¯éŒ¯èª¤**
   - æª¢æŸ¥ `tsconfig.json` é…ç½®
   - ç¢ºèªæ‰€æœ‰ä¾è³´å·²å®‰è£

2. **è…³æœ¬åŸ·è¡Œå¤±æ•—**
   - æª¢æŸ¥ç’°å¢ƒè®Šæ•¸è¨­å®š
   - ç¢ºèª Firebase ç™»å…¥ç‹€æ…‹

3. **API æ¸¬è©¦å¤±æ•—**
   - ç¢ºèªæœ¬åœ°ä¼ºæœå™¨æ­£åœ¨é‹è¡Œ
   - æª¢æŸ¥ç¶²è·¯é€£ç·šç‹€æ…‹

### æ—¥èªŒæŸ¥çœ‹

æ‰€æœ‰è…³æœ¬éƒ½æœƒè¼¸å‡ºè©³ç´°çš„åŸ·è¡Œæ—¥èªŒï¼ŒåŒ…å«ï¼š
- åŸ·è¡Œæ­¥é©Ÿ
- éŒ¯èª¤è¨Šæ¯
- æˆåŠŸç‹€æ…‹

## ğŸ“ æ³¨æ„äº‹é …

1. æ‰€æœ‰è…³æœ¬éƒ½ä½¿ç”¨ TypeScript ç·¨å¯«ï¼Œæä¾›å®Œæ•´çš„é¡å‹å®‰å…¨
2. è…³æœ¬æ”¯æ´éåŒæ­¥æ“ä½œå’ŒéŒ¯èª¤è™•ç†
3. ä½¿ç”¨é¡åˆ¥çµæ§‹çµ„ç¹”ç¨‹å¼ç¢¼ï¼Œä¾¿æ–¼ç¶­è­·å’Œæ“´å±•
4. æ‰€æœ‰è…³æœ¬éƒ½å¯ä»¥ç¨ç«‹åŸ·è¡Œæˆ–ä½œç‚ºæ¨¡çµ„åŒ¯å…¥

## ğŸ¤ è²¢ç»

ç•¶æ–°å¢æˆ–ä¿®æ”¹è…³æœ¬æ™‚ï¼Œè«‹ï¼š

1. ä½¿ç”¨ TypeScript ç·¨å¯«
2. éµå¾ªç¾æœ‰çš„é¡åˆ¥çµæ§‹
3. æ·»åŠ é©ç•¶çš„éŒ¯èª¤è™•ç†
4. æ›´æ–°æ­¤ README æ–‡ä»¶
5. åŸ·è¡Œæ¸¬è©¦ç¢ºä¿åŠŸèƒ½æ­£å¸¸
