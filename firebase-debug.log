[debug] [2025-08-30T20:13:43.765Z] ----------------------------------------------------------------------
[debug] [2025-08-30T20:13:43.767Z] Command:       /usr/local/Cellar/node/24.5.0/bin/node /usr/local/bin/firebase emulators:start --only functions
[debug] [2025-08-30T20:13:43.768Z] CLI Version:   14.15.1
[debug] [2025-08-30T20:13:43.768Z] Platform:      darwin
[debug] [2025-08-30T20:13:43.768Z] Node Version:  v24.5.0
[debug] [2025-08-30T20:13:43.768Z] Time:          Sun Aug 31 2025 04:13:43 GMT+0800 (台北標準時間)
[debug] [2025-08-30T20:13:43.768Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-08-30T20:13:43.977Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-08-30T20:13:43.977Z] > authorizing via signed-in user (sbu19830208@gmail.com)
[info] i  emulators: Starting emulators: functions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions"}}
[debug] [2025-08-30T20:13:44.867Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-30T20:13:44.867Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-08-30T20:13:44.872Z] [hub] writing locator at /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/hub-stock-health-app.json
[debug] [2025-08-30T20:13:45.745Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-30T20:13:45.746Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-30T20:13:45.746Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-30T20:13:45.746Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, auth, firestore, database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mapphosting, auth, firestore, database, hosting, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2025-08-30T20:13:45.755Z] defaultcredentials: writing to file /Users/sbu/.config/firebase/sbu19830208_gmail_com_application_default_credentials.json
[debug] [2025-08-30T20:13:45.757Z] Setting GAC to /Users/sbu/.config/firebase/sbu19830208_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/sbu/.config/firebase/sbu19830208_gmail_com_application_default_credentials.json"}}
[debug] [2025-08-30T20:13:45.758Z] Checked if tokens are valid: true, expires at: 1756586686942
[debug] [2025-08-30T20:13:45.758Z] Checked if tokens are valid: true, expires at: 1756586686942
[debug] [2025-08-30T20:13:45.759Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/stock-health-app/adminSdkConfig [none]
[debug] [2025-08-30T20:13:46.182Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/stock-health-app/adminSdkConfig 200
[debug] [2025-08-30T20:13:46.183Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/stock-health-app/adminSdkConfig {"projectId":"stock-health-app","storageBucket":"stock-health-app.firebasestorage.app"}
[info] i  functions: Watching "/Users/sbu/Desktop/股健檢/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/sbu/Desktop/股健檢/functions\" for Cloud Functions..."}}
[debug] [2025-08-30T20:13:46.216Z] Validating nodejs source
[debug] [2025-08-30T20:13:46.702Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:13:46.702Z] Building nodejs source
[debug] [2025-08-30T20:13:46.703Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:13:46.706Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:13:46.726Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8934

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:13:47.463Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5001/stock-health-app/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/stock-health-app/us-central1/api)."}}
[debug] [2025-08-30T20:13:51.492Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2025-08-30T20:13:55.488Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/-2025-08-30T20:13:55.487Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:13:55.488Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/-2025-08-30T20:13:55.487Z"],"workRunningCount":1}
[debug] [2025-08-30T20:13:55.488Z] Accepted request GET /stock-health-app/us-central1/api/ --> us-central1-api
[debug] [2025-08-30T20:13:55.489Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:13:55.490Z] [functions] Got req.url=/stock-health-app/us-central1/api/, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/, mapping to path=/"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:13:55.494Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:13:55.495Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:13:56.178Z] [runtime-status] [25913] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:13:56.178Z] [runtime-status] [25913] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:13:56.179Z] [runtime-status] [25913] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:13:56.180Z] [runtime-status] [25913] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:13:56.410Z] [runtime-status] [25913] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:13:56.410Z] [runtime-status] [25913] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:13:56.411Z] [runtime-status] [25913] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:13:56.413Z] [runtime-status] [25913] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:13:56.415Z] [runtime-status] [25913] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:13:56.415Z] [runtime-status] [25913] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:13:56.784Z] [runtime-status] [25913] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[warn] ⚠  functions: The Cloud Firestore emulator is not running, so calls to Firestore will affect production. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Firestore emulator is not running, so calls to Firestore will affect production."}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:13:56.795Z] [runtime-status] [25913] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:13:56.795Z] [runtime-status] [25913] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_3babb2381d3084b8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [25913] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_3babb2381d3084b8.sock"}}
[debug] [2025-08-30T20:13:56.821Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: IDLE"}}
[debug] [2025-08-30T20:13:56.821Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:13:56.822Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: BUSY"}}
[debug] [2025-08-30T20:13:56.828Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 6.90416ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 6.90416ms"}}
[debug] [2025-08-30T20:13:56.829Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: IDLE"}}
[debug] [2025-08-30T20:13:56.829Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:13:56.829Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:13:56.829Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:13:56.843Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-2025-08-30T20:13:56.843Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:13:56.843Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-2025-08-30T20:13:56.843Z"],"workRunningCount":1}
[debug] [2025-08-30T20:13:56.843Z] Accepted request GET /stock-health-app/us-central1/api/test --> us-central1-api
[debug] [2025-08-30T20:13:56.844Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:13:56.844Z] [functions] Got req.url=/stock-health-app/us-central1/api/test, mapping to path=/test {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test, mapping to path=/test"}}
[debug] [2025-08-30T20:13:56.844Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:13:56.844Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: BUSY"}}
[debug] [2025-08-30T20:13:56.847Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2.743819ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2.743819ms"}}
[debug] [2025-08-30T20:13:56.847Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: IDLE"}}
[debug] [2025-08-30T20:13:56.848Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:13:56.848Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:13:56.848Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:13:56.866Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:13:56.865Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:13:56.866Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:13:56.865Z"],"workRunningCount":1}
[debug] [2025-08-30T20:13:56.866Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:13:56.866Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:13:56.866Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:13:56.866Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:13:56.867Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:14:01 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:14:01 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:14:01 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: mUxu.K6CPXA {"user":"New crumb: mUxu.K6CPXA","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: mUxu.K6CPXA"}}
[info] >  ✅ 成功取得 2330.TW 的資料 {"user":"✅ 成功取得 2330.TW 的資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 2330.TW 的資料"}}
[info] >  處理報價資料: 2330.TW { {"user":"處理報價資料: 2330.TW {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理報價資料: 2330.TW {"}}
[info] >    hasPrice: false, {"user":"  hasPrice: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasPrice: false,"}}
[info] >    hasRegularMarketPrice: true, {"user":"  hasRegularMarketPrice: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasRegularMarketPrice: true,"}}
[info] >    hasFundProfile: false, {"user":"  hasFundProfile: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasFundProfile: false,"}}
[info] >    hasAssetProfile: false {"user":"  hasAssetProfile: false","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasAssetProfile: false"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  處理完成: 2330.TW - TAIWAN SEMICONDUCTOR MANUFACTUR - 價格: 1160 {"user":"處理完成: 2330.TW - TAIWAN SEMICONDUCTOR MANUFACTUR - 價格: 1160","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理完成: 2330.TW - TAIWAN SEMICONDUCTOR MANUFACTUR - 價格: 1160"}}
[info] >  [Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`. {"user":"[Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m [Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`."}}
[debug] [2025-08-30T20:13:58.250Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[info] >  股票 API 錯誤: HTTPError: Request failed with status code 400 {"user":"股票 API 錯誤: HTTPError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股票 API 錯誤: HTTPError: Request failed with status code 400"}}
[info] >      at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20) {"user":"    at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)"}}
[info] >      at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88 {"user":"    at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14) {"user":"    at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)"}}
[info] >      at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21) {"user":"    at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)"}}
[info] >      at async replyWithFlex (/Users/sbu/Desktop/股健檢/functions/index.js:302:3) {"user":"    at async replyWithFlex (/Users/sbu/Desktop/股健檢/functions/index.js:302:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async replyWithFlex (/Users/sbu/Desktop/股健檢/functions/index.js:302:3)"}}
[info] >      at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:267:7) {"user":"    at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:267:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:267:7)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4317:41) {"user":"    at Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4317:41)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4317:41)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21) {"user":"    at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)"}}
[info] >      at async replyWithFlex (/Users/sbu/Desktop/股健檢/functions/index.js:302:3) {"user":"    at async replyWithFlex (/Users/sbu/Desktop/股健檢/functions/index.js:302:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async replyWithFlex (/Users/sbu/Desktop/股健檢/functions/index.js:302:3)"}}
[info] >      at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:267:7) {"user":"    at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:267:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:267:7)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 { {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    statusMessage: 'Bad Request', {"user":"  statusMessage: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusMessage: 'Bad Request',"}}
[info] >    originalError: AxiosError: Request failed with status code 400 {"user":"  originalError: AxiosError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   originalError: AxiosError: Request failed with status code 400"}}
[info] >        at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12) {"user":"      at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)"}}
[info] >        at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11) {"user":"      at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)"}}
[info] >        at IncomingMessage.emit (node:events:519:35) {"user":"      at IncomingMessage.emit (node:events:519:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.emit (node:events:519:35)"}}
[info] >        at endReadableNT (node:internal/streams/readable:1701:12) {"user":"      at endReadableNT (node:internal/streams/readable:1701:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at endReadableNT (node:internal/streams/readable:1701:12)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >      code: 'ERR_BAD_REQUEST', {"user":"    code: 'ERR_BAD_REQUEST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'ERR_BAD_REQUEST',"}}
[info] >      config: { {"user":"    config: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     config: {"}}
[info] >        transitional: [Object], {"user":"      transitional: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transitional: [Object],"}}
[info] >        adapter: [Array], {"user":"      adapter: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       adapter: [Array],"}}
[info] >        transformRequest: [Array], {"user":"      transformRequest: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformRequest: [Array],"}}
[info] >        transformResponse: [Array], {"user":"      transformResponse: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformResponse: [Array],"}}
[info] >        timeout: 0, {"user":"      timeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeout: 0,"}}
[info] >        xsrfCookieName: 'XSRF-TOKEN', {"user":"      xsrfCookieName: 'XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfCookieName: 'XSRF-TOKEN',"}}
[info] >        xsrfHeaderName: 'X-XSRF-TOKEN', {"user":"      xsrfHeaderName: 'X-XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfHeaderName: 'X-XSRF-TOKEN',"}}
[info] >        maxContentLength: -1, {"user":"      maxContentLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxContentLength: -1,"}}
[info] >        maxBodyLength: -1, {"user":"      maxBodyLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxBodyLength: -1,"}}
[info] >        env: [Object], {"user":"      env: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       env: [Object],"}}
[info] >        validateStatus: [Function: validateStatus], {"user":"      validateStatus: [Function: validateStatus],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       validateStatus: [Function: validateStatus],"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        method: 'post', {"user":"      method: 'post',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'post',"}}
[info] >        url: 'https://api.line.me/v2/bot/message/reply', {"user":"      url: 'https://api.line.me/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: 'https://api.line.me/v2/bot/message/reply',"}}
[info] >        data: '{"messages":[{"type":"flex","altText":"TAIWAN SEMICONDUCTOR MANUFACTUR 股票健康度報告","contents":{"type":"bubble","header":{"type":"box","layout":"vertical","contents":[{"type":"text","text":"📊 股票健康度報告","weight":"bold","size":"lg","color":"#1DB446"}]},"hero":{"type":"box","layout":"vertical","contents":[{"type":"text","text":"TAIWAN SEMICONDUCTOR MANUFACTUR","size":"xxl","weight":"bold","color":"#333333"},{"type":"text","text":"健康分數: 48/100","size":"lg","color":"#FF0000","weight":"bold"},{"type":"text","text":"需要關注","size":"md","color":"#FF0000"}]},"body":{"type":"box","layout":"vertical","contents":[{"type":"box","layout":"horizontal","contents":[{"type":"text","text":"基本指標","size":"sm","color":"#555555","flex":1},{"type":"text","text":"20.83","size":"sm","color":"#111111","align":"end","flex":1}]},{"type":"box","layout":"horizontal","contents":[{"type":"text","text":"市值","size":"sm","color":"#555555","flex":1},{"type":"text","text":"30.1 兆","size":"sm","color":"#111111","align":"end","flex":1}]},{"type":"box","layout":"horizontal","contents":[{"type":"text","text":"近月漲跌","size":"sm","color":"#555555","flex":1},{"type":"text","text":"0%","size":"sm","color":"#00C500","align":"end","flex":1}]}]},"footer":{"type":"box","layout":"horizontal","contents":[{"type":"button","action":{"type":"postback","label":"加入清單","data":"action:add_to_watchlist&symbol:TAIWAN SEMICONDUCTOR MANUFACTUR"},"style":"primary","color":"#1DB446"},{"type":"button","action":{"type":"message","label":"詳細分析","text":"詳細分析 TAIWAN SEMICONDUCTOR MANUFACTUR"},"style":"secondary"}]}}}],"replyToken":"test-reply-token","notificationDisabled":false}', {"user":"      data: '{\"messages\":[{\"type\":\"flex\",\"altText\":\"TAIWAN SEMICONDUCTOR MANUFACTUR 股票健康度報告\",\"contents\":{\"type\":\"bubble\",\"header\":{\"type\":\"box\",\"layout\":\"vertical\",\"contents\":[{\"type\":\"text\",\"text\":\"📊 股票健康度報告\",\"weight\":\"bold\",\"size\":\"lg\",\"color\":\"#1DB446\"}]},\"hero\":{\"type\":\"box\",\"layout\":\"vertical\",\"contents\":[{\"type\":\"text\",\"text\":\"TAIWAN SEMICONDUCTOR MANUFACTUR\",\"size\":\"xxl\",\"weight\":\"bold\",\"color\":\"#333333\"},{\"type\":\"text\",\"text\":\"健康分數: 48/100\",\"size\":\"lg\",\"color\":\"#FF0000\",\"weight\":\"bold\"},{\"type\":\"text\",\"text\":\"需要關注\",\"size\":\"md\",\"color\":\"#FF0000\"}]},\"body\":{\"type\":\"box\",\"layout\":\"vertical\",\"contents\":[{\"type\":\"box\",\"layout\":\"horizontal\",\"contents\":[{\"type\":\"text\",\"text\":\"基本指標\",\"size\":\"sm\",\"color\":\"#555555\",\"flex\":1},{\"type\":\"text\",\"text\":\"20.83\",\"size\":\"sm\",\"color\":\"#111111\",\"align\":\"end\",\"flex\":1}]},{\"type\":\"box\",\"layout\":\"horizontal\",\"contents\":[{\"type\":\"text\",\"text\":\"市值\",\"size\":\"sm\",\"color\":\"#555555\",\"flex\":1},{\"type\":\"text\",\"text\":\"30.1 兆\",\"size\":\"sm\",\"color\":\"#111111\",\"align\":\"end\",\"flex\":1}]},{\"type\":\"box\",\"layout\":\"horizontal\",\"contents\":[{\"type\":\"text\",\"text\":\"近月漲跌\",\"size\":\"sm\",\"color\":\"#555555\",\"flex\":1},{\"type\":\"text\",\"text\":\"0%\",\"size\":\"sm\",\"color\":\"#00C500\",\"align\":\"end\",\"flex\":1}]}]},\"footer\":{\"type\":\"box\",\"layout\":\"horizontal\",\"contents\":[{\"type\":\"button\",\"action\":{\"type\":\"postback\",\"label\":\"加入清單\",\"data\":\"action:add_to_watchlist&symbol:TAIWAN SEMICONDUCTOR MANUFACTUR\"},\"style\":\"primary\",\"color\":\"#1DB446\"},{\"type\":\"button\",\"action\":{\"type\":\"message\",\"label\":\"詳細分析\",\"text\":\"詳細分析 TAIWAN SEMICONDUCTOR MANUFACTUR\"},\"style\":\"secondary\"}]}}}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: '{\"messages\":[{\"type\":\"flex\",\"altText\":\"TAIWAN SEMICONDUCTOR MANUFACTUR 股票健康度報告\",\"contents\":{\"type\":\"bubble\",\"header\":{\"type\":\"box\",\"layout\":\"vertical\",\"contents\":[{\"type\":\"text\",\"text\":\"📊 股票健康度報告\",\"weight\":\"bold\",\"size\":\"lg\",\"color\":\"#1DB446\"}]},\"hero\":{\"type\":\"box\",\"layout\":\"vertical\",\"contents\":[{\"type\":\"text\",\"text\":\"TAIWAN SEMICONDUCTOR MANUFACTUR\",\"size\":\"xxl\",\"weight\":\"bold\",\"color\":\"#333333\"},{\"type\":\"text\",\"text\":\"健康分數: 48/100\",\"size\":\"lg\",\"color\":\"#FF0000\",\"weight\":\"bold\"},{\"type\":\"text\",\"text\":\"需要關注\",\"size\":\"md\",\"color\":\"#FF0000\"}]},\"body\":{\"type\":\"box\",\"layout\":\"vertical\",\"contents\":[{\"type\":\"box\",\"layout\":\"horizontal\",\"contents\":[{\"type\":\"text\",\"text\":\"基本指標\",\"size\":\"sm\",\"color\":\"#555555\",\"flex\":1},{\"type\":\"text\",\"text\":\"20.83\",\"size\":\"sm\",\"color\":\"#111111\",\"align\":\"end\",\"flex\":1}]},{\"type\":\"box\",\"layout\":\"horizontal\",\"contents\":[{\"type\":\"text\",\"text\":\"市值\",\"size\":\"sm\",\"color\":\"#555555\",\"flex\":1},{\"type\":\"text\",\"text\":\"30.1 兆\",\"size\":\"sm\",\"color\":\"#111111\",\"align\":\"end\",\"flex\":1}]},{\"type\":\"box\",\"layout\":\"horizontal\",\"contents\":[{\"type\":\"text\",\"text\":\"近月漲跌\",\"size\":\"sm\",\"color\":\"#555555\",\"flex\":1},{\"type\":\"text\",\"text\":\"0%\",\"size\":\"sm\",\"color\":\"#00C500\",\"align\":\"end\",\"flex\":1}]}]},\"footer\":{\"type\":\"box\",\"layout\":\"horizontal\",\"contents\":[{\"type\":\"button\",\"action\":{\"type\":\"postback\",\"label\":\"加入清單\",\"data\":\"action:add_to_watchlist&symbol:TAIWAN SEMICONDUCTOR MANUFACTUR\"},\"style\":\"primary\",\"color\":\"#1DB446\"},{\"type\":\"button\",\"action\":{\"type\":\"message\",\"label\":\"詳細分析\",\"text\":\"詳細分析 TAIWAN SEMICONDUCTOR MANUFACTUR\"},\"style\":\"secondary\"}]}}}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',"}}
[info] >        allowAbsoluteUrls: true {"user":"      allowAbsoluteUrls: true","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       allowAbsoluteUrls: true"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      request: ClientRequest { {"user":"    request: ClientRequest {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request: ClientRequest {"}}
[info] >        _events: [Object: null prototype], {"user":"      _events: [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object: null prototype],"}}
[info] >        _eventsCount: 7, {"user":"      _eventsCount: 7,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 7,"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        outputData: [], {"user":"      outputData: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputData: [],"}}
[info] >        outputSize: 0, {"user":"      outputSize: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputSize: 0,"}}
[info] >        writable: true, {"user":"      writable: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       writable: true,"}}
[info] >        destroyed: false, {"user":"      destroyed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       destroyed: false,"}}
[info] >        _last: false, {"user":"      _last: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _last: false,"}}
[info] >        chunkedEncoding: false, {"user":"      chunkedEncoding: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       chunkedEncoding: false,"}}
[info] >        shouldKeepAlive: false, {"user":"      shouldKeepAlive: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       shouldKeepAlive: false,"}}
[info] >        maxRequestsOnConnectionReached: false, {"user":"      maxRequestsOnConnectionReached: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxRequestsOnConnectionReached: false,"}}
[info] >        _defaultKeepAlive: true, {"user":"      _defaultKeepAlive: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _defaultKeepAlive: true,"}}
[info] >        useChunkedEncodingByDefault: true, {"user":"      useChunkedEncodingByDefault: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       useChunkedEncodingByDefault: true,"}}
[info] >        sendDate: false, {"user":"      sendDate: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       sendDate: false,"}}
[info] >        _removedConnection: false, {"user":"      _removedConnection: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedConnection: false,"}}
[info] >        _removedContLen: false, {"user":"      _removedContLen: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedContLen: false,"}}
[info] >        _removedTE: false, {"user":"      _removedTE: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedTE: false,"}}
[info] >        strictContentLength: false, {"user":"      strictContentLength: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       strictContentLength: false,"}}
[info] >        _contentLength: 1722, {"user":"      _contentLength: 1722,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _contentLength: 1722,"}}
[info] >        _hasBody: true, {"user":"      _hasBody: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _hasBody: true,"}}
[info] >        _trailer: '', {"user":"      _trailer: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _trailer: '',"}}
[info] >        finished: true, {"user":"      finished: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       finished: true,"}}
[info] >        _headerSent: true, {"user":"      _headerSent: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _headerSent: true,"}}
[info] >        _closed: false, {"user":"      _closed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _closed: false,"}}
[info] >        _header: 'POST /v2/bot/message/reply HTTP/1.1\r\n' + {"user":"      _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +"}}
[info] >          'Accept: application/json, text/plain, */*\r\n' + {"user":"        'Accept: application/json, text/plain, */*\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept: application/json, text/plain, */*\\r\\n' +"}}
[info] >          'Content-Type: application/json\r\n' + {"user":"        'Content-Type: application/json\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Type: application/json\\r\\n' +"}}
[info] >          'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\r\n' + {"user":"        'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +"}}
[info] >          'User-Agent: @line/bot-sdk/10.2.0\r\n' + {"user":"        'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +"}}
[info] >          'Content-Length: 1722\r\n' + {"user":"        'Content-Length: 1722\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Length: 1722\\r\\n' +"}}
[info] >          'Accept-Encoding: gzip, compress, deflate, br\r\n' + {"user":"        'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +"}}
[info] >          'Host: api.line.me\r\n' + {"user":"        'Host: api.line.me\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Host: api.line.me\\r\\n' +"}}
[info] >          'Connection: keep-alive\r\n' + {"user":"        'Connection: keep-alive\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Connection: keep-alive\\r\\n' +"}}
[info] >          '\r\n', {"user":"        '\\r\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\r\\n',"}}
[info] >        _keepAliveTimeout: 0, {"user":"      _keepAliveTimeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _keepAliveTimeout: 0,"}}
[info] >        _onPendingData: [Function: nop], {"user":"      _onPendingData: [Function: nop],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _onPendingData: [Function: nop],"}}
[info] >        agent: [Agent], {"user":"      agent: [Agent],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       agent: [Agent],"}}
[info] >        socketPath: undefined, {"user":"      socketPath: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       socketPath: undefined,"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        maxHeaderSize: undefined, {"user":"      maxHeaderSize: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeaderSize: undefined,"}}
[info] >        insecureHTTPParser: undefined, {"user":"      insecureHTTPParser: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       insecureHTTPParser: undefined,"}}
[info] >        joinDuplicateHeaders: undefined, {"user":"      joinDuplicateHeaders: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: undefined,"}}
[info] >        path: '/v2/bot/message/reply', {"user":"      path: '/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       path: '/v2/bot/message/reply',"}}
[info] >        _ended: true, {"user":"      _ended: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _ended: true,"}}
[info] >        res: [IncomingMessage], {"user":"      res: [IncomingMessage],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [IncomingMessage],"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        timeoutCb: [Function: emitRequestTimeout], {"user":"      timeoutCb: [Function: emitRequestTimeout],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeoutCb: [Function: emitRequestTimeout],"}}
[info] >        upgradeOrConnect: false, {"user":"      upgradeOrConnect: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgradeOrConnect: false,"}}
[info] >        parser: null, {"user":"      parser: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       parser: null,"}}
[info] >        maxHeadersCount: null, {"user":"      maxHeadersCount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeadersCount: null,"}}
[info] >        reusedSocket: false, {"user":"      reusedSocket: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       reusedSocket: false,"}}
[info] >        host: 'api.line.me', {"user":"      host: 'api.line.me',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       host: 'api.line.me',"}}
[info] >        protocol: 'https:', {"user":"      protocol: 'https:',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       protocol: 'https:',"}}
[info] >        _redirectable: [Writable], {"user":"      _redirectable: [Writable],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _redirectable: [Writable],"}}
[info] >        Symbol(shapeMode): false, {"user":"      Symbol(shapeMode): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(shapeMode): false,"}}
[info] >        Symbol(kCapture): false, {"user":"      Symbol(kCapture): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kCapture): false,"}}
[info] >        Symbol(kBytesWritten): 0, {"user":"      Symbol(kBytesWritten): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kBytesWritten): 0,"}}
[info] >        Symbol(kNeedDrain): false, {"user":"      Symbol(kNeedDrain): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kNeedDrain): false,"}}
[info] >        Symbol(corked): 0, {"user":"      Symbol(corked): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(corked): 0,"}}
[info] >        Symbol(kChunkedBuffer): [], {"user":"      Symbol(kChunkedBuffer): [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedBuffer): [],"}}
[info] >        Symbol(kChunkedLength): 0, {"user":"      Symbol(kChunkedLength): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedLength): 0,"}}
[info] >        Symbol(kSocket): [TLSSocket], {"user":"      Symbol(kSocket): [TLSSocket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kSocket): [TLSSocket],"}}
[info] >        Symbol(kOutHeaders): [Object: null prototype], {"user":"      Symbol(kOutHeaders): [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kOutHeaders): [Object: null prototype],"}}
[info] >        Symbol(errored): null, {"user":"      Symbol(errored): null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(errored): null,"}}
[info] >        Symbol(kHighWaterMark): 65536, {"user":"      Symbol(kHighWaterMark): 65536,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kHighWaterMark): 65536,"}}
[info] >        Symbol(kRejectNonStandardBodyWrites): false, {"user":"      Symbol(kRejectNonStandardBodyWrites): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kRejectNonStandardBodyWrites): false,"}}
[info] >        Symbol(kUniqueHeaders): null {"user":"      Symbol(kUniqueHeaders): null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kUniqueHeaders): null"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      response: { {"user":"    response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     response: {"}}
[info] >        status: 400, {"user":"      status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       status: 400,"}}
[info] >        statusText: 'Bad Request', {"user":"      statusText: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusText: 'Bad Request',"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        config: [Object], {"user":"      config: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       config: [Object],"}}
[info] >        request: [ClientRequest], {"user":"      request: [ClientRequest],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request: [ClientRequest],"}}
[info] >        data: [Object] {"user":"      data: [Object]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: [Object]"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      status: 400 {"user":"    status: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 400"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  股票查詢錯誤: HTTPError: Request failed with status code 400 {"user":"股票查詢錯誤: HTTPError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股票查詢錯誤: HTTPError: Request failed with status code 400"}}
[info] >      at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20) {"user":"    at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)"}}
[info] >      at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88 {"user":"    at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14) {"user":"    at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)"}}
[info] >      at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21) {"user":"    at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)"}}
[info] >      at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:277:7) {"user":"    at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:277:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:277:7)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 { {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    statusMessage: 'Bad Request', {"user":"  statusMessage: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusMessage: 'Bad Request',"}}
[info] >    originalError: AxiosError: Request failed with status code 400 {"user":"  originalError: AxiosError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   originalError: AxiosError: Request failed with status code 400"}}
[info] >        at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12) {"user":"      at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)"}}
[info] >        at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11) {"user":"      at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)"}}
[info] >        at IncomingMessage.emit (node:events:519:35) {"user":"      at IncomingMessage.emit (node:events:519:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.emit (node:events:519:35)"}}
[info] >        at endReadableNT (node:internal/streams/readable:1701:12) {"user":"      at endReadableNT (node:internal/streams/readable:1701:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at endReadableNT (node:internal/streams/readable:1701:12)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >      code: 'ERR_BAD_REQUEST', {"user":"    code: 'ERR_BAD_REQUEST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'ERR_BAD_REQUEST',"}}
[info] >      config: { {"user":"    config: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     config: {"}}
[info] >        transitional: [Object], {"user":"      transitional: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transitional: [Object],"}}
[info] >        adapter: [Array], {"user":"      adapter: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       adapter: [Array],"}}
[info] >        transformRequest: [Array], {"user":"      transformRequest: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformRequest: [Array],"}}
[info] >        transformResponse: [Array], {"user":"      transformResponse: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformResponse: [Array],"}}
[info] >        timeout: 0, {"user":"      timeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeout: 0,"}}
[info] >        xsrfCookieName: 'XSRF-TOKEN', {"user":"      xsrfCookieName: 'XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfCookieName: 'XSRF-TOKEN',"}}
[info] >        xsrfHeaderName: 'X-XSRF-TOKEN', {"user":"      xsrfHeaderName: 'X-XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfHeaderName: 'X-XSRF-TOKEN',"}}
[info] >        maxContentLength: -1, {"user":"      maxContentLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxContentLength: -1,"}}
[info] >        maxBodyLength: -1, {"user":"      maxBodyLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxBodyLength: -1,"}}
[info] >        env: [Object], {"user":"      env: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       env: [Object],"}}
[info] >        validateStatus: [Function: validateStatus], {"user":"      validateStatus: [Function: validateStatus],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       validateStatus: [Function: validateStatus],"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        method: 'post', {"user":"      method: 'post',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'post',"}}
[info] >        url: 'https://api.line.me/v2/bot/message/reply', {"user":"      url: 'https://api.line.me/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: 'https://api.line.me/v2/bot/message/reply',"}}
[info] >        data: '{"messages":[{"type":"text","text":"❌ 無法取得 2330 的股票數據\\n\\n🚀 可能的原因：\\n• 股票代碼格式錯誤\\n• 當前非交易時間\\n• 網路連接問題\\n\\n請確認代碼並稍後再試\\n例如：2330 (台積電)"}],"replyToken":"test-reply-token","notificationDisabled":false}', {"user":"      data: '{\"messages\":[{\"type\":\"text\",\"text\":\"❌ 無法取得 2330 的股票數據\\\\n\\\\n🚀 可能的原因：\\\\n• 股票代碼格式錯誤\\\\n• 當前非交易時間\\\\n• 網路連接問題\\\\n\\\\n請確認代碼並稍後再試\\\\n例如：2330 (台積電)\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: '{\"messages\":[{\"type\":\"text\",\"text\":\"❌ 無法取得 2330 的股票數據\\\\n\\\\n🚀 可能的原因：\\\\n• 股票代碼格式錯誤\\\\n• 當前非交易時間\\\\n• 網路連接問題\\\\n\\\\n請確認代碼並稍後再試\\\\n例如：2330 (台積電)\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',"}}
[info] >        allowAbsoluteUrls: true {"user":"      allowAbsoluteUrls: true","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       allowAbsoluteUrls: true"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      request: ClientRequest { {"user":"    request: ClientRequest {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request: ClientRequest {"}}
[info] >        _events: [Object: null prototype], {"user":"      _events: [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object: null prototype],"}}
[info] >        _eventsCount: 7, {"user":"      _eventsCount: 7,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 7,"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        outputData: [], {"user":"      outputData: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputData: [],"}}
[info] >        outputSize: 0, {"user":"      outputSize: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputSize: 0,"}}
[info] >        writable: true, {"user":"      writable: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       writable: true,"}}
[info] >        destroyed: false, {"user":"      destroyed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       destroyed: false,"}}
[info] >        _last: false, {"user":"      _last: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _last: false,"}}
[info] >        chunkedEncoding: false, {"user":"      chunkedEncoding: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       chunkedEncoding: false,"}}
[info] >        shouldKeepAlive: false, {"user":"      shouldKeepAlive: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       shouldKeepAlive: false,"}}
[info] >        maxRequestsOnConnectionReached: false, {"user":"      maxRequestsOnConnectionReached: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxRequestsOnConnectionReached: false,"}}
[info] >        _defaultKeepAlive: true, {"user":"      _defaultKeepAlive: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _defaultKeepAlive: true,"}}
[info] >        useChunkedEncodingByDefault: true, {"user":"      useChunkedEncodingByDefault: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       useChunkedEncodingByDefault: true,"}}
[info] >        sendDate: false, {"user":"      sendDate: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       sendDate: false,"}}
[info] >        _removedConnection: false, {"user":"      _removedConnection: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedConnection: false,"}}
[info] >        _removedContLen: false, {"user":"      _removedContLen: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedContLen: false,"}}
[info] >        _removedTE: false, {"user":"      _removedTE: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedTE: false,"}}
[info] >        strictContentLength: false, {"user":"      strictContentLength: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       strictContentLength: false,"}}
[info] >        _contentLength: 307, {"user":"      _contentLength: 307,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _contentLength: 307,"}}
[info] >        _hasBody: true, {"user":"      _hasBody: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _hasBody: true,"}}
[info] >        _trailer: '', {"user":"      _trailer: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _trailer: '',"}}
[info] >        finished: true, {"user":"      finished: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       finished: true,"}}
[info] >        _headerSent: true, {"user":"      _headerSent: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _headerSent: true,"}}
[info] >        _closed: false, {"user":"      _closed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _closed: false,"}}
[info] >        _header: 'POST /v2/bot/message/reply HTTP/1.1\r\n' + {"user":"      _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +"}}
[info] >          'Accept: application/json, text/plain, */*\r\n' + {"user":"        'Accept: application/json, text/plain, */*\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept: application/json, text/plain, */*\\r\\n' +"}}
[info] >          'Content-Type: application/json\r\n' + {"user":"        'Content-Type: application/json\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Type: application/json\\r\\n' +"}}
[info] >          'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\r\n' + {"user":"        'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +"}}
[info] >          'User-Agent: @line/bot-sdk/10.2.0\r\n' + {"user":"        'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +"}}
[info] >          'Content-Length: 307\r\n' + {"user":"        'Content-Length: 307\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Length: 307\\r\\n' +"}}
[info] >          'Accept-Encoding: gzip, compress, deflate, br\r\n' + {"user":"        'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +"}}
[info] >          'Host: api.line.me\r\n' + {"user":"        'Host: api.line.me\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Host: api.line.me\\r\\n' +"}}
[info] >          'Connection: keep-alive\r\n' + {"user":"        'Connection: keep-alive\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Connection: keep-alive\\r\\n' +"}}
[info] >          '\r\n', {"user":"        '\\r\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\r\\n',"}}
[info] >        _keepAliveTimeout: 0, {"user":"      _keepAliveTimeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _keepAliveTimeout: 0,"}}
[info] >        _onPendingData: [Function: nop], {"user":"      _onPendingData: [Function: nop],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _onPendingData: [Function: nop],"}}
[info] >        agent: [Agent], {"user":"      agent: [Agent],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       agent: [Agent],"}}
[info] >        socketPath: undefined, {"user":"      socketPath: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       socketPath: undefined,"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        maxHeaderSize: undefined, {"user":"      maxHeaderSize: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeaderSize: undefined,"}}
[info] >        insecureHTTPParser: undefined, {"user":"      insecureHTTPParser: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       insecureHTTPParser: undefined,"}}
[info] >        joinDuplicateHeaders: undefined, {"user":"      joinDuplicateHeaders: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: undefined,"}}
[info] >        path: '/v2/bot/message/reply', {"user":"      path: '/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       path: '/v2/bot/message/reply',"}}
[info] >        _ended: true, {"user":"      _ended: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _ended: true,"}}
[info] >        res: [IncomingMessage], {"user":"      res: [IncomingMessage],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [IncomingMessage],"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        timeoutCb: [Function: emitRequestTimeout], {"user":"      timeoutCb: [Function: emitRequestTimeout],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeoutCb: [Function: emitRequestTimeout],"}}
[info] >        upgradeOrConnect: false, {"user":"      upgradeOrConnect: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgradeOrConnect: false,"}}
[info] >        parser: null, {"user":"      parser: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       parser: null,"}}
[info] >        maxHeadersCount: null, {"user":"      maxHeadersCount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeadersCount: null,"}}
[info] >        reusedSocket: false, {"user":"      reusedSocket: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       reusedSocket: false,"}}
[info] >        host: 'api.line.me', {"user":"      host: 'api.line.me',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       host: 'api.line.me',"}}
[info] >        protocol: 'https:', {"user":"      protocol: 'https:',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       protocol: 'https:',"}}
[info] >        _redirectable: [Writable], {"user":"      _redirectable: [Writable],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _redirectable: [Writable],"}}
[info] >        Symbol(shapeMode): false, {"user":"      Symbol(shapeMode): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(shapeMode): false,"}}
[info] >        Symbol(kCapture): false, {"user":"      Symbol(kCapture): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kCapture): false,"}}
[info] >        Symbol(kBytesWritten): 0, {"user":"      Symbol(kBytesWritten): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kBytesWritten): 0,"}}
[info] >        Symbol(kNeedDrain): false, {"user":"      Symbol(kNeedDrain): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kNeedDrain): false,"}}
[info] >        Symbol(corked): 0, {"user":"      Symbol(corked): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(corked): 0,"}}
[info] >        Symbol(kChunkedBuffer): [], {"user":"      Symbol(kChunkedBuffer): [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedBuffer): [],"}}
[info] >        Symbol(kChunkedLength): 0, {"user":"      Symbol(kChunkedLength): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedLength): 0,"}}
[info] >        Symbol(kSocket): [TLSSocket], {"user":"      Symbol(kSocket): [TLSSocket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kSocket): [TLSSocket],"}}
[info] >        Symbol(kOutHeaders): [Object: null prototype], {"user":"      Symbol(kOutHeaders): [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kOutHeaders): [Object: null prototype],"}}
[info] >        Symbol(errored): null, {"user":"      Symbol(errored): null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(errored): null,"}}
[info] >        Symbol(kHighWaterMark): 65536, {"user":"      Symbol(kHighWaterMark): 65536,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kHighWaterMark): 65536,"}}
[info] >        Symbol(kRejectNonStandardBodyWrites): false, {"user":"      Symbol(kRejectNonStandardBodyWrites): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kRejectNonStandardBodyWrites): false,"}}
[info] >        Symbol(kUniqueHeaders): null {"user":"      Symbol(kUniqueHeaders): null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kUniqueHeaders): null"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      response: { {"user":"    response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     response: {"}}
[info] >        status: 400, {"user":"      status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       status: 400,"}}
[info] >        statusText: 'Bad Request', {"user":"      statusText: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusText: 'Bad Request',"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        config: [Object], {"user":"      config: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       config: [Object],"}}
[info] >        request: [ClientRequest], {"user":"      request: [ClientRequest],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request: [ClientRequest],"}}
[info] >        data: [Object] {"user":"      data: [Object]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: [Object]"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      status: 400 {"user":"    status: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 400"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  訊息處理錯誤: HTTPError: Request failed with status code 400 {"user":"訊息處理錯誤: HTTPError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 訊息處理錯誤: HTTPError: Request failed with status code 400"}}
[info] >      at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20) {"user":"    at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)"}}
[info] >      at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88 {"user":"    at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14) {"user":"    at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)"}}
[info] >      at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21) {"user":"    at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)"}}
[info] >      at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3) {"user":"    at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)"}}
[info] >      at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5) {"user":"    at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4317:41) {"user":"    at Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4317:41)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4317:41)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21) {"user":"    at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)"}}
[info] >      at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3) {"user":"    at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)"}}
[info] >      at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5) {"user":"    at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 { {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    statusMessage: 'Bad Request', {"user":"  statusMessage: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusMessage: 'Bad Request',"}}
[info] >    originalError: AxiosError: Request failed with status code 400 {"user":"  originalError: AxiosError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   originalError: AxiosError: Request failed with status code 400"}}
[info] >        at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12) {"user":"      at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)"}}
[info] >        at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11) {"user":"      at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)"}}
[info] >        at IncomingMessage.emit (node:events:519:35) {"user":"      at IncomingMessage.emit (node:events:519:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.emit (node:events:519:35)"}}
[info] >        at endReadableNT (node:internal/streams/readable:1701:12) {"user":"      at endReadableNT (node:internal/streams/readable:1701:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at endReadableNT (node:internal/streams/readable:1701:12)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >      code: 'ERR_BAD_REQUEST', {"user":"    code: 'ERR_BAD_REQUEST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'ERR_BAD_REQUEST',"}}
[info] >      config: { {"user":"    config: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     config: {"}}
[info] >        transitional: [Object], {"user":"      transitional: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transitional: [Object],"}}
[info] >        adapter: [Array], {"user":"      adapter: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       adapter: [Array],"}}
[info] >        transformRequest: [Array], {"user":"      transformRequest: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformRequest: [Array],"}}
[info] >        transformResponse: [Array], {"user":"      transformResponse: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformResponse: [Array],"}}
[info] >        timeout: 0, {"user":"      timeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeout: 0,"}}
[info] >        xsrfCookieName: 'XSRF-TOKEN', {"user":"      xsrfCookieName: 'XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfCookieName: 'XSRF-TOKEN',"}}
[info] >        xsrfHeaderName: 'X-XSRF-TOKEN', {"user":"      xsrfHeaderName: 'X-XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfHeaderName: 'X-XSRF-TOKEN',"}}
[info] >        maxContentLength: -1, {"user":"      maxContentLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxContentLength: -1,"}}
[info] >        maxBodyLength: -1, {"user":"      maxBodyLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxBodyLength: -1,"}}
[info] >        env: [Object], {"user":"      env: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       env: [Object],"}}
[info] >        validateStatus: [Function: validateStatus], {"user":"      validateStatus: [Function: validateStatus],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       validateStatus: [Function: validateStatus],"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        method: 'post', {"user":"      method: 'post',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'post',"}}
[info] >        url: 'https://api.line.me/v2/bot/message/reply', {"user":"      url: 'https://api.line.me/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: 'https://api.line.me/v2/bot/message/reply',"}}
[info] >        data: '{"messages":[{"type":"text","text":"查詢過程中發生錯誤，請稍後再試。"}],"replyToken":"test-reply-token","notificationDisabled":false}', {"user":"      data: '{\"messages\":[{\"type\":\"text\",\"text\":\"查詢過程中發生錯誤，請稍後再試。\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: '{\"messages\":[{\"type\":\"text\",\"text\":\"查詢過程中發生錯誤，請稍後再試。\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',"}}
[info] >        allowAbsoluteUrls: true {"user":"      allowAbsoluteUrls: true","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       allowAbsoluteUrls: true"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      request: ClientRequest { {"user":"    request: ClientRequest {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request: ClientRequest {"}}
[info] >        _events: [Object: null prototype], {"user":"      _events: [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object: null prototype],"}}
[info] >        _eventsCount: 7, {"user":"      _eventsCount: 7,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 7,"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        outputData: [], {"user":"      outputData: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputData: [],"}}
[info] >        outputSize: 0, {"user":"      outputSize: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputSize: 0,"}}
[info] >        writable: true, {"user":"      writable: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       writable: true,"}}
[info] >        destroyed: false, {"user":"      destroyed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       destroyed: false,"}}
[info] >        _last: false, {"user":"      _last: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _last: false,"}}
[info] >        chunkedEncoding: false, {"user":"      chunkedEncoding: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       chunkedEncoding: false,"}}
[info] >        shouldKeepAlive: false, {"user":"      shouldKeepAlive: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       shouldKeepAlive: false,"}}
[info] >        maxRequestsOnConnectionReached: false, {"user":"      maxRequestsOnConnectionReached: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxRequestsOnConnectionReached: false,"}}
[info] >        _defaultKeepAlive: true, {"user":"      _defaultKeepAlive: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _defaultKeepAlive: true,"}}
[info] >        useChunkedEncodingByDefault: true, {"user":"      useChunkedEncodingByDefault: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       useChunkedEncodingByDefault: true,"}}
[info] >        sendDate: false, {"user":"      sendDate: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       sendDate: false,"}}
[info] >        _removedConnection: false, {"user":"      _removedConnection: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedConnection: false,"}}
[info] >        _removedContLen: false, {"user":"      _removedContLen: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedContLen: false,"}}
[info] >        _removedTE: false, {"user":"      _removedTE: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedTE: false,"}}
[info] >        strictContentLength: false, {"user":"      strictContentLength: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       strictContentLength: false,"}}
[info] >        _contentLength: 149, {"user":"      _contentLength: 149,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _contentLength: 149,"}}
[info] >        _hasBody: true, {"user":"      _hasBody: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _hasBody: true,"}}
[info] >        _trailer: '', {"user":"      _trailer: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _trailer: '',"}}
[info] >        finished: true, {"user":"      finished: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       finished: true,"}}
[info] >        _headerSent: true, {"user":"      _headerSent: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _headerSent: true,"}}
[info] >        _closed: false, {"user":"      _closed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _closed: false,"}}
[info] >        _header: 'POST /v2/bot/message/reply HTTP/1.1\r\n' + {"user":"      _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +"}}
[info] >          'Accept: application/json, text/plain, */*\r\n' + {"user":"        'Accept: application/json, text/plain, */*\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept: application/json, text/plain, */*\\r\\n' +"}}
[info] >          'Content-Type: application/json\r\n' + {"user":"        'Content-Type: application/json\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Type: application/json\\r\\n' +"}}
[info] >          'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\r\n' + {"user":"        'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +"}}
[info] >          'User-Agent: @line/bot-sdk/10.2.0\r\n' + {"user":"        'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +"}}
[info] >          'Content-Length: 149\r\n' + {"user":"        'Content-Length: 149\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Length: 149\\r\\n' +"}}
[info] >          'Accept-Encoding: gzip, compress, deflate, br\r\n' + {"user":"        'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +"}}
[info] >          'Host: api.line.me\r\n' + {"user":"        'Host: api.line.me\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Host: api.line.me\\r\\n' +"}}
[info] >          'Connection: keep-alive\r\n' + {"user":"        'Connection: keep-alive\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Connection: keep-alive\\r\\n' +"}}
[info] >          '\r\n', {"user":"        '\\r\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\r\\n',"}}
[info] >        _keepAliveTimeout: 0, {"user":"      _keepAliveTimeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _keepAliveTimeout: 0,"}}
[info] >        _onPendingData: [Function: nop], {"user":"      _onPendingData: [Function: nop],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _onPendingData: [Function: nop],"}}
[info] >        agent: [Agent], {"user":"      agent: [Agent],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       agent: [Agent],"}}
[info] >        socketPath: undefined, {"user":"      socketPath: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       socketPath: undefined,"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        maxHeaderSize: undefined, {"user":"      maxHeaderSize: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeaderSize: undefined,"}}
[info] >        insecureHTTPParser: undefined, {"user":"      insecureHTTPParser: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       insecureHTTPParser: undefined,"}}
[info] >        joinDuplicateHeaders: undefined, {"user":"      joinDuplicateHeaders: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: undefined,"}}
[info] >        path: '/v2/bot/message/reply', {"user":"      path: '/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       path: '/v2/bot/message/reply',"}}
[info] >        _ended: true, {"user":"      _ended: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _ended: true,"}}
[info] >        res: [IncomingMessage], {"user":"      res: [IncomingMessage],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [IncomingMessage],"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        timeoutCb: [Function: emitRequestTimeout], {"user":"      timeoutCb: [Function: emitRequestTimeout],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeoutCb: [Function: emitRequestTimeout],"}}
[info] >        upgradeOrConnect: false, {"user":"      upgradeOrConnect: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgradeOrConnect: false,"}}
[info] >        parser: null, {"user":"      parser: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       parser: null,"}}
[info] >        maxHeadersCount: null, {"user":"      maxHeadersCount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeadersCount: null,"}}
[info] >        reusedSocket: false, {"user":"      reusedSocket: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       reusedSocket: false,"}}
[info] >        host: 'api.line.me', {"user":"      host: 'api.line.me',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       host: 'api.line.me',"}}
[info] >        protocol: 'https:', {"user":"      protocol: 'https:',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       protocol: 'https:',"}}
[info] >        _redirectable: [Writable], {"user":"      _redirectable: [Writable],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _redirectable: [Writable],"}}
[info] >        Symbol(shapeMode): false, {"user":"      Symbol(shapeMode): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(shapeMode): false,"}}
[info] >        Symbol(kCapture): false, {"user":"      Symbol(kCapture): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kCapture): false,"}}
[info] >        Symbol(kBytesWritten): 0, {"user":"      Symbol(kBytesWritten): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kBytesWritten): 0,"}}
[info] >        Symbol(kNeedDrain): false, {"user":"      Symbol(kNeedDrain): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kNeedDrain): false,"}}
[info] >        Symbol(corked): 0, {"user":"      Symbol(corked): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(corked): 0,"}}
[info] >        Symbol(kChunkedBuffer): [], {"user":"      Symbol(kChunkedBuffer): [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedBuffer): [],"}}
[info] >        Symbol(kChunkedLength): 0, {"user":"      Symbol(kChunkedLength): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedLength): 0,"}}
[info] >        Symbol(kSocket): [TLSSocket], {"user":"      Symbol(kSocket): [TLSSocket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kSocket): [TLSSocket],"}}
[info] >        Symbol(kOutHeaders): [Object: null prototype], {"user":"      Symbol(kOutHeaders): [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kOutHeaders): [Object: null prototype],"}}
[info] >        Symbol(errored): null, {"user":"      Symbol(errored): null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(errored): null,"}}
[info] >        Symbol(kHighWaterMark): 65536, {"user":"      Symbol(kHighWaterMark): 65536,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kHighWaterMark): 65536,"}}
[info] >        Symbol(kRejectNonStandardBodyWrites): false, {"user":"      Symbol(kRejectNonStandardBodyWrites): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kRejectNonStandardBodyWrites): false,"}}
[info] >        Symbol(kUniqueHeaders): null {"user":"      Symbol(kUniqueHeaders): null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kUniqueHeaders): null"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      response: { {"user":"    response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     response: {"}}
[info] >        status: 400, {"user":"      status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       status: 400,"}}
[info] >        statusText: 'Bad Request', {"user":"      statusText: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusText: 'Bad Request',"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        config: [Object], {"user":"      config: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       config: [Object],"}}
[info] >        request: [ClientRequest], {"user":"      request: [ClientRequest],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request: [ClientRequest],"}}
[info] >        data: [Object] {"user":"      data: [Object]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: [Object]"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      status: 400 {"user":"    status: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 400"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  測試 Webhook 錯誤: HTTPError: Request failed with status code 400 {"user":"測試 Webhook 錯誤: HTTPError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 測試 Webhook 錯誤: HTTPError: Request failed with status code 400"}}
[info] >      at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20) {"user":"    at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)"}}
[info] >      at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88 {"user":"    at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14) {"user":"    at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)"}}
[info] >      at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21) {"user":"    at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)"}}
[info] >      at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3) {"user":"    at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:187:5) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:187:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:187:5)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 { {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    statusMessage: 'Bad Request', {"user":"  statusMessage: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusMessage: 'Bad Request',"}}
[info] >    originalError: AxiosError: Request failed with status code 400 {"user":"  originalError: AxiosError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   originalError: AxiosError: Request failed with status code 400"}}
[info] >        at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12) {"user":"      at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)"}}
[info] >        at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11) {"user":"      at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)"}}
[info] >        at IncomingMessage.emit (node:events:519:35) {"user":"      at IncomingMessage.emit (node:events:519:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.emit (node:events:519:35)"}}
[info] >        at endReadableNT (node:internal/streams/readable:1701:12) {"user":"      at endReadableNT (node:internal/streams/readable:1701:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at endReadableNT (node:internal/streams/readable:1701:12)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >      code: 'ERR_BAD_REQUEST', {"user":"    code: 'ERR_BAD_REQUEST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'ERR_BAD_REQUEST',"}}
[info] >      config: { {"user":"    config: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     config: {"}}
[info] >        transitional: [Object], {"user":"      transitional: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transitional: [Object],"}}
[info] >        adapter: [Array], {"user":"      adapter: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       adapter: [Array],"}}
[info] >        transformRequest: [Array], {"user":"      transformRequest: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformRequest: [Array],"}}
[info] >        transformResponse: [Array], {"user":"      transformResponse: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformResponse: [Array],"}}
[info] >        timeout: 0, {"user":"      timeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeout: 0,"}}
[info] >        xsrfCookieName: 'XSRF-TOKEN', {"user":"      xsrfCookieName: 'XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfCookieName: 'XSRF-TOKEN',"}}
[info] >        xsrfHeaderName: 'X-XSRF-TOKEN', {"user":"      xsrfHeaderName: 'X-XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfHeaderName: 'X-XSRF-TOKEN',"}}
[info] >        maxContentLength: -1, {"user":"      maxContentLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxContentLength: -1,"}}
[info] >        maxBodyLength: -1, {"user":"      maxBodyLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxBodyLength: -1,"}}
[info] >        env: [Object], {"user":"      env: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       env: [Object],"}}
[info] >        validateStatus: [Function: validateStatus], {"user":"      validateStatus: [Function: validateStatus],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       validateStatus: [Function: validateStatus],"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        method: 'post', {"user":"      method: 'post',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'post',"}}
[info] >        url: 'https://api.line.me/v2/bot/message/reply', {"user":"      url: 'https://api.line.me/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: 'https://api.line.me/v2/bot/message/reply',"}}
[info] >        data: '{"messages":[{"type":"text","text":"處理訊息時發生錯誤，請稍後再試。"}],"replyToken":"test-reply-token","notificationDisabled":false}', {"user":"      data: '{\"messages\":[{\"type\":\"text\",\"text\":\"處理訊息時發生錯誤，請稍後再試。\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: '{\"messages\":[{\"type\":\"text\",\"text\":\"處理訊息時發生錯誤，請稍後再試。\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',"}}
[info] >        allowAbsoluteUrls: true {"user":"      allowAbsoluteUrls: true","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       allowAbsoluteUrls: true"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      request: ClientRequest { {"user":"    request: ClientRequest {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request: ClientRequest {"}}
[info] >        _events: [Object: null prototype], {"user":"      _events: [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object: null prototype],"}}
[info] >        _eventsCount: 7, {"user":"      _eventsCount: 7,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 7,"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        outputData: [], {"user":"      outputData: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputData: [],"}}
[info] >        outputSize: 0, {"user":"      outputSize: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputSize: 0,"}}
[info] >        writable: true, {"user":"      writable: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       writable: true,"}}
[info] >        destroyed: false, {"user":"      destroyed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       destroyed: false,"}}
[info] >        _last: false, {"user":"      _last: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _last: false,"}}
[info] >        chunkedEncoding: false, {"user":"      chunkedEncoding: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       chunkedEncoding: false,"}}
[info] >        shouldKeepAlive: false, {"user":"      shouldKeepAlive: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       shouldKeepAlive: false,"}}
[info] >        maxRequestsOnConnectionReached: false, {"user":"      maxRequestsOnConnectionReached: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxRequestsOnConnectionReached: false,"}}
[info] >        _defaultKeepAlive: true, {"user":"      _defaultKeepAlive: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _defaultKeepAlive: true,"}}
[info] >        useChunkedEncodingByDefault: true, {"user":"      useChunkedEncodingByDefault: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       useChunkedEncodingByDefault: true,"}}
[info] >        sendDate: false, {"user":"      sendDate: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       sendDate: false,"}}
[info] >        _removedConnection: false, {"user":"      _removedConnection: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedConnection: false,"}}
[info] >        _removedContLen: false, {"user":"      _removedContLen: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedContLen: false,"}}
[info] >        _removedTE: false, {"user":"      _removedTE: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedTE: false,"}}
[info] >        strictContentLength: false, {"user":"      strictContentLength: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       strictContentLength: false,"}}
[info] >        _contentLength: 149, {"user":"      _contentLength: 149,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _contentLength: 149,"}}
[info] >        _hasBody: true, {"user":"      _hasBody: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _hasBody: true,"}}
[info] >        _trailer: '', {"user":"      _trailer: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _trailer: '',"}}
[info] >        finished: true, {"user":"      finished: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       finished: true,"}}
[info] >        _headerSent: true, {"user":"      _headerSent: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _headerSent: true,"}}
[info] >        _closed: false, {"user":"      _closed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _closed: false,"}}
[info] >        _header: 'POST /v2/bot/message/reply HTTP/1.1\r\n' + {"user":"      _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +"}}
[info] >          'Accept: application/json, text/plain, */*\r\n' + {"user":"        'Accept: application/json, text/plain, */*\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept: application/json, text/plain, */*\\r\\n' +"}}
[info] >          'Content-Type: application/json\r\n' + {"user":"        'Content-Type: application/json\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Type: application/json\\r\\n' +"}}
[info] >          'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\r\n' + {"user":"        'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +"}}
[info] >          'User-Agent: @line/bot-sdk/10.2.0\r\n' + {"user":"        'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +"}}
[info] >          'Content-Length: 149\r\n' + {"user":"        'Content-Length: 149\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Length: 149\\r\\n' +"}}
[info] >          'Accept-Encoding: gzip, compress, deflate, br\r\n' + {"user":"        'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +"}}
[info] >          'Host: api.line.me\r\n' + {"user":"        'Host: api.line.me\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Host: api.line.me\\r\\n' +"}}
[info] >          'Connection: keep-alive\r\n' + {"user":"        'Connection: keep-alive\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Connection: keep-alive\\r\\n' +"}}
[info] >          '\r\n', {"user":"        '\\r\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\r\\n',"}}
[info] >        _keepAliveTimeout: 0, {"user":"      _keepAliveTimeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _keepAliveTimeout: 0,"}}
[info] >        _onPendingData: [Function: nop], {"user":"      _onPendingData: [Function: nop],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _onPendingData: [Function: nop],"}}
[info] >        agent: [Agent], {"user":"      agent: [Agent],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       agent: [Agent],"}}
[info] >        socketPath: undefined, {"user":"      socketPath: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       socketPath: undefined,"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        maxHeaderSize: undefined, {"user":"      maxHeaderSize: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeaderSize: undefined,"}}
[info] >        insecureHTTPParser: undefined, {"user":"      insecureHTTPParser: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       insecureHTTPParser: undefined,"}}
[info] >        joinDuplicateHeaders: undefined, {"user":"      joinDuplicateHeaders: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: undefined,"}}
[info] >        path: '/v2/bot/message/reply', {"user":"      path: '/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       path: '/v2/bot/message/reply',"}}
[info] >        _ended: true, {"user":"      _ended: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _ended: true,"}}
[info] >        res: [IncomingMessage], {"user":"      res: [IncomingMessage],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [IncomingMessage],"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        timeoutCb: [Function: emitRequestTimeout], {"user":"      timeoutCb: [Function: emitRequestTimeout],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeoutCb: [Function: emitRequestTimeout],"}}
[info] >        upgradeOrConnect: false, {"user":"      upgradeOrConnect: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgradeOrConnect: false,"}}
[info] >        parser: null, {"user":"      parser: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       parser: null,"}}
[info] >        maxHeadersCount: null, {"user":"      maxHeadersCount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeadersCount: null,"}}
[info] >        reusedSocket: false, {"user":"      reusedSocket: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       reusedSocket: false,"}}
[info] >        host: 'api.line.me', {"user":"      host: 'api.line.me',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       host: 'api.line.me',"}}
[info] >        protocol: 'https:', {"user":"      protocol: 'https:',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       protocol: 'https:',"}}
[info] >        _redirectable: [Writable], {"user":"      _redirectable: [Writable],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _redirectable: [Writable],"}}
[info] >        Symbol(shapeMode): false, {"user":"      Symbol(shapeMode): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(shapeMode): false,"}}
[info] >        Symbol(kCapture): false, {"user":"      Symbol(kCapture): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kCapture): false,"}}
[info] >        Symbol(kBytesWritten): 0, {"user":"      Symbol(kBytesWritten): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kBytesWritten): 0,"}}
[info] >        Symbol(kNeedDrain): false, {"user":"      Symbol(kNeedDrain): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kNeedDrain): false,"}}
[info] >        Symbol(corked): 0, {"user":"      Symbol(corked): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(corked): 0,"}}
[info] >        Symbol(kChunkedBuffer): [], {"user":"      Symbol(kChunkedBuffer): [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedBuffer): [],"}}
[info] >        Symbol(kChunkedLength): 0, {"user":"      Symbol(kChunkedLength): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedLength): 0,"}}
[info] >        Symbol(kSocket): [TLSSocket], {"user":"      Symbol(kSocket): [TLSSocket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kSocket): [TLSSocket],"}}
[info] >        Symbol(kOutHeaders): [Object: null prototype], {"user":"      Symbol(kOutHeaders): [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kOutHeaders): [Object: null prototype],"}}
[info] >        Symbol(errored): null, {"user":"      Symbol(errored): null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(errored): null,"}}
[info] >        Symbol(kHighWaterMark): 65536, {"user":"      Symbol(kHighWaterMark): 65536,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kHighWaterMark): 65536,"}}
[info] >        Symbol(kRejectNonStandardBodyWrites): false, {"user":"      Symbol(kRejectNonStandardBodyWrites): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kRejectNonStandardBodyWrites): false,"}}
[info] >        Symbol(kUniqueHeaders): null {"user":"      Symbol(kUniqueHeaders): null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kUniqueHeaders): null"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      response: { {"user":"    response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     response: {"}}
[info] >        status: 400, {"user":"      status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       status: 400,"}}
[info] >        statusText: 'Bad Request', {"user":"      statusText: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusText: 'Bad Request',"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        config: [Object], {"user":"      config: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       config: [Object],"}}
[info] >        request: [ClientRequest], {"user":"      request: [ClientRequest],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request: [ClientRequest],"}}
[info] >        data: [Object] {"user":"      data: [Object]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: [Object]"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      status: 400 {"user":"    status: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 400"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-08-30T20:13:59.030Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2163.205503ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2163.205503ms"}}
[debug] [2025-08-30T20:13:59.030Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: IDLE"}}
[debug] [2025-08-30T20:13:59.030Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:13:59.030Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:13:59.030Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:13:59.048Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:13:59.048Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:13:59.048Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:13:59.048Z"],"workRunningCount":1}
[debug] [2025-08-30T20:13:59.048Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:13:59.049Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:13:59.049Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:13:59.049Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:13:59.050Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: BUSY"}}
[debug] [2025-08-30T20:13:59.252Z] Validating nodejs source
[debug] [2025-08-30T20:13:59.741Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:13:59.741Z] Building nodejs source
[debug] [2025-08-30T20:13:59.741Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[info] >  ✅ 成功取得 0050.TW 的資料 {"user":"✅ 成功取得 0050.TW 的資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0050.TW 的資料"}}
[info] >  處理報價資料: 0050.TW { {"user":"處理報價資料: 0050.TW {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理報價資料: 0050.TW {"}}
[info] >    hasPrice: false, {"user":"  hasPrice: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasPrice: false,"}}
[info] >    hasRegularMarketPrice: true, {"user":"  hasRegularMarketPrice: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasRegularMarketPrice: true,"}}
[info] >    hasFundProfile: false, {"user":"  hasFundProfile: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasFundProfile: false,"}}
[info] >    hasAssetProfile: false {"user":"  hasAssetProfile: false","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasAssetProfile: false"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5 {"user":"處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5"}}
[info] >  Error fetching data for 0050.TW: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "data.marketCap"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`. {"user":"Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}}
[info] >  股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據 {"user":"股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據"}}
[info] >      at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:132:11) {"user":"    at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:132:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:132:11)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:215:25) {"user":"    at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:215:25)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:215:25)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5"}}
[info] >  股票查詢錯誤: HTTPError: Request failed with status code 400 {"user":"股票查詢錯誤: HTTPError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股票查詢錯誤: HTTPError: Request failed with status code 400"}}
[info] >      at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20) {"user":"    at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)"}}
[info] >      at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88 {"user":"    at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14) {"user":"    at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)"}}
[info] >      at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21) {"user":"    at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)"}}
[info] >      at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:277:7) {"user":"    at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:277:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:277:7)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 { {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    statusMessage: 'Bad Request', {"user":"  statusMessage: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusMessage: 'Bad Request',"}}
[info] >    originalError: AxiosError: Request failed with status code 400 {"user":"  originalError: AxiosError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   originalError: AxiosError: Request failed with status code 400"}}
[info] >        at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12) {"user":"      at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)"}}
[info] >        at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11) {"user":"      at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)"}}
[info] >        at IncomingMessage.emit (node:events:519:35) {"user":"      at IncomingMessage.emit (node:events:519:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.emit (node:events:519:35)"}}
[info] >        at endReadableNT (node:internal/streams/readable:1701:12) {"user":"      at endReadableNT (node:internal/streams/readable:1701:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at endReadableNT (node:internal/streams/readable:1701:12)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >      code: 'ERR_BAD_REQUEST', {"user":"    code: 'ERR_BAD_REQUEST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'ERR_BAD_REQUEST',"}}
[info] >      config: { {"user":"    config: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     config: {"}}
[info] >        transitional: [Object], {"user":"      transitional: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transitional: [Object],"}}
[info] >        adapter: [Array], {"user":"      adapter: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       adapter: [Array],"}}
[info] >        transformRequest: [Array], {"user":"      transformRequest: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformRequest: [Array],"}}
[info] >        transformResponse: [Array], {"user":"      transformResponse: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformResponse: [Array],"}}
[info] >        timeout: 0, {"user":"      timeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeout: 0,"}}
[info] >        xsrfCookieName: 'XSRF-TOKEN', {"user":"      xsrfCookieName: 'XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfCookieName: 'XSRF-TOKEN',"}}
[info] >        xsrfHeaderName: 'X-XSRF-TOKEN', {"user":"      xsrfHeaderName: 'X-XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfHeaderName: 'X-XSRF-TOKEN',"}}
[info] >        maxContentLength: -1, {"user":"      maxContentLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxContentLength: -1,"}}
[info] >        maxBodyLength: -1, {"user":"      maxBodyLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxBodyLength: -1,"}}
[info] >        env: [Object], {"user":"      env: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       env: [Object],"}}
[info] >        validateStatus: [Function: validateStatus], {"user":"      validateStatus: [Function: validateStatus],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       validateStatus: [Function: validateStatus],"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        method: 'post', {"user":"      method: 'post',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'post',"}}
[info] >        url: 'https://api.line.me/v2/bot/message/reply', {"user":"      url: 'https://api.line.me/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: 'https://api.line.me/v2/bot/message/reply',"}}
[info] >        data: '{"messages":[{"type":"text","text":"❌ 無法取得 0050 的股票數據\\n\\n🚀 可能的原因：\\n• 股票代碼格式錯誤\\n• 當前非交易時間\\n• 網路連接問題\\n\\n請確認代碼並稍後再試\\n例如：2330 (台積電)"}],"replyToken":"test-reply-token","notificationDisabled":false}', {"user":"      data: '{\"messages\":[{\"type\":\"text\",\"text\":\"❌ 無法取得 0050 的股票數據\\\\n\\\\n🚀 可能的原因：\\\\n• 股票代碼格式錯誤\\\\n• 當前非交易時間\\\\n• 網路連接問題\\\\n\\\\n請確認代碼並稍後再試\\\\n例如：2330 (台積電)\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: '{\"messages\":[{\"type\":\"text\",\"text\":\"❌ 無法取得 0050 的股票數據\\\\n\\\\n🚀 可能的原因：\\\\n• 股票代碼格式錯誤\\\\n• 當前非交易時間\\\\n• 網路連接問題\\\\n\\\\n請確認代碼並稍後再試\\\\n例如：2330 (台積電)\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',"}}
[info] >        allowAbsoluteUrls: true {"user":"      allowAbsoluteUrls: true","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       allowAbsoluteUrls: true"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      request: ClientRequest { {"user":"    request: ClientRequest {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request: ClientRequest {"}}
[info] >        _events: [Object: null prototype], {"user":"      _events: [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object: null prototype],"}}
[info] >        _eventsCount: 7, {"user":"      _eventsCount: 7,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 7,"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        outputData: [], {"user":"      outputData: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputData: [],"}}
[info] >        outputSize: 0, {"user":"      outputSize: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputSize: 0,"}}
[info] >        writable: true, {"user":"      writable: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       writable: true,"}}
[info] >        destroyed: false, {"user":"      destroyed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       destroyed: false,"}}
[info] >        _last: false, {"user":"      _last: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _last: false,"}}
[info] >        chunkedEncoding: false, {"user":"      chunkedEncoding: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       chunkedEncoding: false,"}}
[info] >        shouldKeepAlive: false, {"user":"      shouldKeepAlive: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       shouldKeepAlive: false,"}}
[info] >        maxRequestsOnConnectionReached: false, {"user":"      maxRequestsOnConnectionReached: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxRequestsOnConnectionReached: false,"}}
[info] >        _defaultKeepAlive: true, {"user":"      _defaultKeepAlive: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _defaultKeepAlive: true,"}}
[info] >        useChunkedEncodingByDefault: true, {"user":"      useChunkedEncodingByDefault: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       useChunkedEncodingByDefault: true,"}}
[info] >        sendDate: false, {"user":"      sendDate: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       sendDate: false,"}}
[info] >        _removedConnection: false, {"user":"      _removedConnection: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedConnection: false,"}}
[info] >        _removedContLen: false, {"user":"      _removedContLen: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedContLen: false,"}}
[info] >        _removedTE: false, {"user":"      _removedTE: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedTE: false,"}}
[info] >        strictContentLength: false, {"user":"      strictContentLength: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       strictContentLength: false,"}}
[info] >        _contentLength: 307, {"user":"      _contentLength: 307,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _contentLength: 307,"}}
[info] >        _hasBody: true, {"user":"      _hasBody: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _hasBody: true,"}}
[info] >        _trailer: '', {"user":"      _trailer: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _trailer: '',"}}
[info] >        finished: true, {"user":"      finished: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       finished: true,"}}
[info] >        _headerSent: true, {"user":"      _headerSent: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _headerSent: true,"}}
[info] >        _closed: false, {"user":"      _closed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _closed: false,"}}
[info] >        _header: 'POST /v2/bot/message/reply HTTP/1.1\r\n' + {"user":"      _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +"}}
[info] >          'Accept: application/json, text/plain, */*\r\n' + {"user":"        'Accept: application/json, text/plain, */*\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept: application/json, text/plain, */*\\r\\n' +"}}
[info] >          'Content-Type: application/json\r\n' + {"user":"        'Content-Type: application/json\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Type: application/json\\r\\n' +"}}
[info] >          'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\r\n' + {"user":"        'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +"}}
[info] >          'User-Agent: @line/bot-sdk/10.2.0\r\n' + {"user":"        'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +"}}
[info] >          'Content-Length: 307\r\n' + {"user":"        'Content-Length: 307\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Length: 307\\r\\n' +"}}
[info] >          'Accept-Encoding: gzip, compress, deflate, br\r\n' + {"user":"        'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +"}}
[info] >          'Host: api.line.me\r\n' + {"user":"        'Host: api.line.me\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Host: api.line.me\\r\\n' +"}}
[info] >          'Connection: keep-alive\r\n' + {"user":"        'Connection: keep-alive\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Connection: keep-alive\\r\\n' +"}}
[info] >          '\r\n', {"user":"        '\\r\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\r\\n',"}}
[info] >        _keepAliveTimeout: 0, {"user":"      _keepAliveTimeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _keepAliveTimeout: 0,"}}
[info] >        _onPendingData: [Function: nop], {"user":"      _onPendingData: [Function: nop],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _onPendingData: [Function: nop],"}}
[info] >        agent: [Agent], {"user":"      agent: [Agent],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       agent: [Agent],"}}
[info] >        socketPath: undefined, {"user":"      socketPath: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       socketPath: undefined,"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        maxHeaderSize: undefined, {"user":"      maxHeaderSize: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeaderSize: undefined,"}}
[info] >        insecureHTTPParser: undefined, {"user":"      insecureHTTPParser: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       insecureHTTPParser: undefined,"}}
[info] >        joinDuplicateHeaders: undefined, {"user":"      joinDuplicateHeaders: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: undefined,"}}
[info] >        path: '/v2/bot/message/reply', {"user":"      path: '/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       path: '/v2/bot/message/reply',"}}
[info] >        _ended: true, {"user":"      _ended: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _ended: true,"}}
[info] >        res: [IncomingMessage], {"user":"      res: [IncomingMessage],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [IncomingMessage],"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        timeoutCb: [Function: emitRequestTimeout], {"user":"      timeoutCb: [Function: emitRequestTimeout],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeoutCb: [Function: emitRequestTimeout],"}}
[info] >        upgradeOrConnect: false, {"user":"      upgradeOrConnect: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgradeOrConnect: false,"}}
[info] >        parser: null, {"user":"      parser: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       parser: null,"}}
[info] >        maxHeadersCount: null, {"user":"      maxHeadersCount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeadersCount: null,"}}
[info] >        reusedSocket: false, {"user":"      reusedSocket: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       reusedSocket: false,"}}
[info] >        host: 'api.line.me', {"user":"      host: 'api.line.me',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       host: 'api.line.me',"}}
[info] >        protocol: 'https:', {"user":"      protocol: 'https:',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       protocol: 'https:',"}}
[info] >        _redirectable: [Writable], {"user":"      _redirectable: [Writable],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _redirectable: [Writable],"}}
[info] >        Symbol(shapeMode): false, {"user":"      Symbol(shapeMode): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(shapeMode): false,"}}
[info] >        Symbol(kCapture): false, {"user":"      Symbol(kCapture): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kCapture): false,"}}
[info] >        Symbol(kBytesWritten): 0, {"user":"      Symbol(kBytesWritten): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kBytesWritten): 0,"}}
[info] >        Symbol(kNeedDrain): false, {"user":"      Symbol(kNeedDrain): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kNeedDrain): false,"}}
[info] >        Symbol(corked): 0, {"user":"      Symbol(corked): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(corked): 0,"}}
[info] >        Symbol(kChunkedBuffer): [], {"user":"      Symbol(kChunkedBuffer): [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedBuffer): [],"}}
[info] >        Symbol(kChunkedLength): 0, {"user":"      Symbol(kChunkedLength): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedLength): 0,"}}
[info] >        Symbol(kSocket): [TLSSocket], {"user":"      Symbol(kSocket): [TLSSocket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kSocket): [TLSSocket],"}}
[info] >        Symbol(kOutHeaders): [Object: null prototype], {"user":"      Symbol(kOutHeaders): [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kOutHeaders): [Object: null prototype],"}}
[info] >        Symbol(errored): null, {"user":"      Symbol(errored): null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(errored): null,"}}
[info] >        Symbol(kHighWaterMark): 65536, {"user":"      Symbol(kHighWaterMark): 65536,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kHighWaterMark): 65536,"}}
[info] >        Symbol(kRejectNonStandardBodyWrites): false, {"user":"      Symbol(kRejectNonStandardBodyWrites): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kRejectNonStandardBodyWrites): false,"}}
[info] >        Symbol(kUniqueHeaders): null {"user":"      Symbol(kUniqueHeaders): null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kUniqueHeaders): null"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      response: { {"user":"    response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     response: {"}}
[info] >        status: 400, {"user":"      status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       status: 400,"}}
[info] >        statusText: 'Bad Request', {"user":"      statusText: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusText: 'Bad Request',"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        config: [Object], {"user":"      config: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       config: [Object],"}}
[info] >        request: [ClientRequest], {"user":"      request: [ClientRequest],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request: [ClientRequest],"}}
[info] >        data: [Object] {"user":"      data: [Object]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: [Object]"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      status: 400 {"user":"    status: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 400"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  訊息處理錯誤: HTTPError: Request failed with status code 400 {"user":"訊息處理錯誤: HTTPError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 訊息處理錯誤: HTTPError: Request failed with status code 400"}}
[info] >      at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20) {"user":"    at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)"}}
[info] >      at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88 {"user":"    at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14) {"user":"    at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)"}}
[info] >      at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21) {"user":"    at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)"}}
[info] >      at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3) {"user":"    at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)"}}
[info] >      at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5) {"user":"    at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4317:41) {"user":"    at Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4317:41)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4317:41)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21) {"user":"    at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)"}}
[info] >      at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3) {"user":"    at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)"}}
[info] >      at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5) {"user":"    at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:282:5)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:133:9)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 { {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    statusMessage: 'Bad Request', {"user":"  statusMessage: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusMessage: 'Bad Request',"}}
[info] >    originalError: AxiosError: Request failed with status code 400 {"user":"  originalError: AxiosError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   originalError: AxiosError: Request failed with status code 400"}}
[info] >        at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12) {"user":"      at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)"}}
[info] >        at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11) {"user":"      at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)"}}
[info] >        at IncomingMessage.emit (node:events:519:35) {"user":"      at IncomingMessage.emit (node:events:519:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.emit (node:events:519:35)"}}
[info] >        at endReadableNT (node:internal/streams/readable:1701:12) {"user":"      at endReadableNT (node:internal/streams/readable:1701:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at endReadableNT (node:internal/streams/readable:1701:12)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >      code: 'ERR_BAD_REQUEST', {"user":"    code: 'ERR_BAD_REQUEST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'ERR_BAD_REQUEST',"}}
[info] >      config: { {"user":"    config: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     config: {"}}
[info] >        transitional: [Object], {"user":"      transitional: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transitional: [Object],"}}
[info] >        adapter: [Array], {"user":"      adapter: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       adapter: [Array],"}}
[info] >        transformRequest: [Array], {"user":"      transformRequest: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformRequest: [Array],"}}
[info] >        transformResponse: [Array], {"user":"      transformResponse: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformResponse: [Array],"}}
[info] >        timeout: 0, {"user":"      timeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeout: 0,"}}
[info] >        xsrfCookieName: 'XSRF-TOKEN', {"user":"      xsrfCookieName: 'XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfCookieName: 'XSRF-TOKEN',"}}
[info] >        xsrfHeaderName: 'X-XSRF-TOKEN', {"user":"      xsrfHeaderName: 'X-XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfHeaderName: 'X-XSRF-TOKEN',"}}
[info] >        maxContentLength: -1, {"user":"      maxContentLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxContentLength: -1,"}}
[info] >        maxBodyLength: -1, {"user":"      maxBodyLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxBodyLength: -1,"}}
[info] >        env: [Object], {"user":"      env: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       env: [Object],"}}
[info] >        validateStatus: [Function: validateStatus], {"user":"      validateStatus: [Function: validateStatus],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       validateStatus: [Function: validateStatus],"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        method: 'post', {"user":"      method: 'post',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'post',"}}
[info] >        url: 'https://api.line.me/v2/bot/message/reply', {"user":"      url: 'https://api.line.me/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: 'https://api.line.me/v2/bot/message/reply',"}}
[info] >        data: '{"messages":[{"type":"text","text":"查詢過程中發生錯誤，請稍後再試。"}],"replyToken":"test-reply-token","notificationDisabled":false}', {"user":"      data: '{\"messages\":[{\"type\":\"text\",\"text\":\"查詢過程中發生錯誤，請稍後再試。\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: '{\"messages\":[{\"type\":\"text\",\"text\":\"查詢過程中發生錯誤，請稍後再試。\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',"}}
[info] >        allowAbsoluteUrls: true {"user":"      allowAbsoluteUrls: true","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       allowAbsoluteUrls: true"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      request: ClientRequest { {"user":"    request: ClientRequest {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request: ClientRequest {"}}
[info] >        _events: [Object: null prototype], {"user":"      _events: [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object: null prototype],"}}
[info] >        _eventsCount: 7, {"user":"      _eventsCount: 7,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 7,"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        outputData: [], {"user":"      outputData: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputData: [],"}}
[info] >        outputSize: 0, {"user":"      outputSize: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputSize: 0,"}}
[info] >        writable: true, {"user":"      writable: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       writable: true,"}}
[info] >        destroyed: false, {"user":"      destroyed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       destroyed: false,"}}
[info] >        _last: false, {"user":"      _last: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _last: false,"}}
[info] >        chunkedEncoding: false, {"user":"      chunkedEncoding: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       chunkedEncoding: false,"}}
[info] >        shouldKeepAlive: false, {"user":"      shouldKeepAlive: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       shouldKeepAlive: false,"}}
[info] >        maxRequestsOnConnectionReached: false, {"user":"      maxRequestsOnConnectionReached: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxRequestsOnConnectionReached: false,"}}
[info] >        _defaultKeepAlive: true, {"user":"      _defaultKeepAlive: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _defaultKeepAlive: true,"}}
[info] >        useChunkedEncodingByDefault: true, {"user":"      useChunkedEncodingByDefault: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       useChunkedEncodingByDefault: true,"}}
[info] >        sendDate: false, {"user":"      sendDate: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       sendDate: false,"}}
[info] >        _removedConnection: false, {"user":"      _removedConnection: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedConnection: false,"}}
[info] >        _removedContLen: false, {"user":"      _removedContLen: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedContLen: false,"}}
[info] >        _removedTE: false, {"user":"      _removedTE: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedTE: false,"}}
[info] >        strictContentLength: false, {"user":"      strictContentLength: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       strictContentLength: false,"}}
[info] >        _contentLength: 149, {"user":"      _contentLength: 149,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _contentLength: 149,"}}
[info] >        _hasBody: true, {"user":"      _hasBody: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _hasBody: true,"}}
[info] >        _trailer: '', {"user":"      _trailer: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _trailer: '',"}}
[info] >        finished: true, {"user":"      finished: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       finished: true,"}}
[info] >        _headerSent: true, {"user":"      _headerSent: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _headerSent: true,"}}
[info] >        _closed: false, {"user":"      _closed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _closed: false,"}}
[info] >        _header: 'POST /v2/bot/message/reply HTTP/1.1\r\n' + {"user":"      _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +"}}
[info] >          'Accept: application/json, text/plain, */*\r\n' + {"user":"        'Accept: application/json, text/plain, */*\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept: application/json, text/plain, */*\\r\\n' +"}}
[info] >          'Content-Type: application/json\r\n' + {"user":"        'Content-Type: application/json\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Type: application/json\\r\\n' +"}}
[info] >          'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\r\n' + {"user":"        'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +"}}
[info] >          'User-Agent: @line/bot-sdk/10.2.0\r\n' + {"user":"        'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +"}}
[info] >          'Content-Length: 149\r\n' + {"user":"        'Content-Length: 149\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Length: 149\\r\\n' +"}}
[info] >          'Accept-Encoding: gzip, compress, deflate, br\r\n' + {"user":"        'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +"}}
[info] >          'Host: api.line.me\r\n' + {"user":"        'Host: api.line.me\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Host: api.line.me\\r\\n' +"}}
[info] >          'Connection: keep-alive\r\n' + {"user":"        'Connection: keep-alive\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Connection: keep-alive\\r\\n' +"}}
[info] >          '\r\n', {"user":"        '\\r\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\r\\n',"}}
[info] >        _keepAliveTimeout: 0, {"user":"      _keepAliveTimeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _keepAliveTimeout: 0,"}}
[info] >        _onPendingData: [Function: nop], {"user":"      _onPendingData: [Function: nop],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _onPendingData: [Function: nop],"}}
[info] >        agent: [Agent], {"user":"      agent: [Agent],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       agent: [Agent],"}}
[info] >        socketPath: undefined, {"user":"      socketPath: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       socketPath: undefined,"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        maxHeaderSize: undefined, {"user":"      maxHeaderSize: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeaderSize: undefined,"}}
[info] >        insecureHTTPParser: undefined, {"user":"      insecureHTTPParser: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       insecureHTTPParser: undefined,"}}
[info] >        joinDuplicateHeaders: undefined, {"user":"      joinDuplicateHeaders: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: undefined,"}}
[info] >        path: '/v2/bot/message/reply', {"user":"      path: '/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       path: '/v2/bot/message/reply',"}}
[info] >        _ended: true, {"user":"      _ended: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _ended: true,"}}
[info] >        res: [IncomingMessage], {"user":"      res: [IncomingMessage],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [IncomingMessage],"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        timeoutCb: [Function: emitRequestTimeout], {"user":"      timeoutCb: [Function: emitRequestTimeout],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeoutCb: [Function: emitRequestTimeout],"}}
[info] >        upgradeOrConnect: false, {"user":"      upgradeOrConnect: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgradeOrConnect: false,"}}
[info] >        parser: null, {"user":"      parser: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       parser: null,"}}
[info] >        maxHeadersCount: null, {"user":"      maxHeadersCount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeadersCount: null,"}}
[info] >        reusedSocket: false, {"user":"      reusedSocket: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       reusedSocket: false,"}}
[info] >        host: 'api.line.me', {"user":"      host: 'api.line.me',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       host: 'api.line.me',"}}
[info] >        protocol: 'https:', {"user":"      protocol: 'https:',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       protocol: 'https:',"}}
[info] >        _redirectable: [Writable], {"user":"      _redirectable: [Writable],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _redirectable: [Writable],"}}
[info] >        Symbol(shapeMode): false, {"user":"      Symbol(shapeMode): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(shapeMode): false,"}}
[info] >        Symbol(kCapture): false, {"user":"      Symbol(kCapture): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kCapture): false,"}}
[info] >        Symbol(kBytesWritten): 0, {"user":"      Symbol(kBytesWritten): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kBytesWritten): 0,"}}
[info] >        Symbol(kNeedDrain): false, {"user":"      Symbol(kNeedDrain): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kNeedDrain): false,"}}
[info] >        Symbol(corked): 0, {"user":"      Symbol(corked): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(corked): 0,"}}
[info] >        Symbol(kChunkedBuffer): [], {"user":"      Symbol(kChunkedBuffer): [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedBuffer): [],"}}
[info] >        Symbol(kChunkedLength): 0, {"user":"      Symbol(kChunkedLength): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedLength): 0,"}}
[info] >        Symbol(kSocket): [TLSSocket], {"user":"      Symbol(kSocket): [TLSSocket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kSocket): [TLSSocket],"}}
[info] >        Symbol(kOutHeaders): [Object: null prototype], {"user":"      Symbol(kOutHeaders): [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kOutHeaders): [Object: null prototype],"}}
[info] >        Symbol(errored): null, {"user":"      Symbol(errored): null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(errored): null,"}}
[info] >        Symbol(kHighWaterMark): 65536, {"user":"      Symbol(kHighWaterMark): 65536,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kHighWaterMark): 65536,"}}
[info] >        Symbol(kRejectNonStandardBodyWrites): false, {"user":"      Symbol(kRejectNonStandardBodyWrites): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kRejectNonStandardBodyWrites): false,"}}
[info] >        Symbol(kUniqueHeaders): null {"user":"      Symbol(kUniqueHeaders): null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kUniqueHeaders): null"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      response: { {"user":"    response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     response: {"}}
[info] >        status: 400, {"user":"      status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       status: 400,"}}
[info] >        statusText: 'Bad Request', {"user":"      statusText: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusText: 'Bad Request',"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        config: [Object], {"user":"      config: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       config: [Object],"}}
[info] >        request: [ClientRequest], {"user":"      request: [ClientRequest],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request: [ClientRequest],"}}
[info] >        data: [Object] {"user":"      data: [Object]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: [Object]"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      status: 400 {"user":"    status: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 400"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  測試 Webhook 錯誤: HTTPError: Request failed with status code 400 {"user":"測試 Webhook 錯誤: HTTPError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 測試 Webhook 錯誤: HTTPError: Request failed with status code 400"}}
[info] >      at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20) {"user":"    at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at HTTPClient.wrapError (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:112:20)"}}
[info] >      at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88 {"user":"    at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:17:88"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14) {"user":"    at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Axios.request (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:4312:14)"}}
[info] >      at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21) {"user":"    at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async HTTPClient.post (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/http-axios.js:31:21)"}}
[info] >      at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3) {"user":"    at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async replyWithText (/Users/sbu/Desktop/股健檢/functions/index.js:294:3)"}}
[info] >      at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:187:5) {"user":"    at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:187:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleMessage (/Users/sbu/Desktop/股健檢/functions/index.js:187:5)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:79:18"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 { {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:76:5 {"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    statusMessage: 'Bad Request', {"user":"  statusMessage: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusMessage: 'Bad Request',"}}
[info] >    originalError: AxiosError: Request failed with status code 400 {"user":"  originalError: AxiosError: Request failed with status code 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   originalError: AxiosError: Request failed with status code 400"}}
[info] >        at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12) {"user":"      at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at settle (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:2090:12)"}}
[info] >        at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11) {"user":"      at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.handleStreamEnd (/Users/sbu/Desktop/股健檢/functions/node_modules/axios/dist/node/axios.cjs:3207:11)"}}
[info] >        at IncomingMessage.emit (node:events:519:35) {"user":"      at IncomingMessage.emit (node:events:519:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at IncomingMessage.emit (node:events:519:35)"}}
[info] >        at endReadableNT (node:internal/streams/readable:1701:12) {"user":"      at endReadableNT (node:internal/streams/readable:1701:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at endReadableNT (node:internal/streams/readable:1701:12)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >      code: 'ERR_BAD_REQUEST', {"user":"    code: 'ERR_BAD_REQUEST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'ERR_BAD_REQUEST',"}}
[info] >      config: { {"user":"    config: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     config: {"}}
[info] >        transitional: [Object], {"user":"      transitional: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transitional: [Object],"}}
[info] >        adapter: [Array], {"user":"      adapter: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       adapter: [Array],"}}
[info] >        transformRequest: [Array], {"user":"      transformRequest: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformRequest: [Array],"}}
[info] >        transformResponse: [Array], {"user":"      transformResponse: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       transformResponse: [Array],"}}
[info] >        timeout: 0, {"user":"      timeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeout: 0,"}}
[info] >        xsrfCookieName: 'XSRF-TOKEN', {"user":"      xsrfCookieName: 'XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfCookieName: 'XSRF-TOKEN',"}}
[info] >        xsrfHeaderName: 'X-XSRF-TOKEN', {"user":"      xsrfHeaderName: 'X-XSRF-TOKEN',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       xsrfHeaderName: 'X-XSRF-TOKEN',"}}
[info] >        maxContentLength: -1, {"user":"      maxContentLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxContentLength: -1,"}}
[info] >        maxBodyLength: -1, {"user":"      maxBodyLength: -1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxBodyLength: -1,"}}
[info] >        env: [Object], {"user":"      env: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       env: [Object],"}}
[info] >        validateStatus: [Function: validateStatus], {"user":"      validateStatus: [Function: validateStatus],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       validateStatus: [Function: validateStatus],"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        method: 'post', {"user":"      method: 'post',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'post',"}}
[info] >        url: 'https://api.line.me/v2/bot/message/reply', {"user":"      url: 'https://api.line.me/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: 'https://api.line.me/v2/bot/message/reply',"}}
[info] >        data: '{"messages":[{"type":"text","text":"處理訊息時發生錯誤，請稍後再試。"}],"replyToken":"test-reply-token","notificationDisabled":false}', {"user":"      data: '{\"messages\":[{\"type\":\"text\",\"text\":\"處理訊息時發生錯誤，請稍後再試。\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: '{\"messages\":[{\"type\":\"text\",\"text\":\"處理訊息時發生錯誤，請稍後再試。\"}],\"replyToken\":\"test-reply-token\",\"notificationDisabled\":false}',"}}
[info] >        allowAbsoluteUrls: true {"user":"      allowAbsoluteUrls: true","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       allowAbsoluteUrls: true"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      request: ClientRequest { {"user":"    request: ClientRequest {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request: ClientRequest {"}}
[info] >        _events: [Object: null prototype], {"user":"      _events: [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object: null prototype],"}}
[info] >        _eventsCount: 7, {"user":"      _eventsCount: 7,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 7,"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        outputData: [], {"user":"      outputData: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputData: [],"}}
[info] >        outputSize: 0, {"user":"      outputSize: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       outputSize: 0,"}}
[info] >        writable: true, {"user":"      writable: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       writable: true,"}}
[info] >        destroyed: false, {"user":"      destroyed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       destroyed: false,"}}
[info] >        _last: false, {"user":"      _last: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _last: false,"}}
[info] >        chunkedEncoding: false, {"user":"      chunkedEncoding: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       chunkedEncoding: false,"}}
[info] >        shouldKeepAlive: false, {"user":"      shouldKeepAlive: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       shouldKeepAlive: false,"}}
[info] >        maxRequestsOnConnectionReached: false, {"user":"      maxRequestsOnConnectionReached: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxRequestsOnConnectionReached: false,"}}
[info] >        _defaultKeepAlive: true, {"user":"      _defaultKeepAlive: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _defaultKeepAlive: true,"}}
[info] >        useChunkedEncodingByDefault: true, {"user":"      useChunkedEncodingByDefault: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       useChunkedEncodingByDefault: true,"}}
[info] >        sendDate: false, {"user":"      sendDate: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       sendDate: false,"}}
[info] >        _removedConnection: false, {"user":"      _removedConnection: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedConnection: false,"}}
[info] >        _removedContLen: false, {"user":"      _removedContLen: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedContLen: false,"}}
[info] >        _removedTE: false, {"user":"      _removedTE: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _removedTE: false,"}}
[info] >        strictContentLength: false, {"user":"      strictContentLength: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       strictContentLength: false,"}}
[info] >        _contentLength: 149, {"user":"      _contentLength: 149,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _contentLength: 149,"}}
[info] >        _hasBody: true, {"user":"      _hasBody: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _hasBody: true,"}}
[info] >        _trailer: '', {"user":"      _trailer: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _trailer: '',"}}
[info] >        finished: true, {"user":"      finished: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       finished: true,"}}
[info] >        _headerSent: true, {"user":"      _headerSent: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _headerSent: true,"}}
[info] >        _closed: false, {"user":"      _closed: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _closed: false,"}}
[info] >        _header: 'POST /v2/bot/message/reply HTTP/1.1\r\n' + {"user":"      _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _header: 'POST /v2/bot/message/reply HTTP/1.1\\r\\n' +"}}
[info] >          'Accept: application/json, text/plain, */*\r\n' + {"user":"        'Accept: application/json, text/plain, */*\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept: application/json, text/plain, */*\\r\\n' +"}}
[info] >          'Content-Type: application/json\r\n' + {"user":"        'Content-Type: application/json\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Type: application/json\\r\\n' +"}}
[info] >          'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\r\n' + {"user":"        'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Authorization: Bearer wTjrgJusoWGTJPnLXqYUryIJy1CSGVKL1XARBL4ZzvbVvvdgNi8hGkRwjBCCHD9MBGHsMpI8ufypX/bg5Z6qAYztTW6vhuJThS0VSbBCLdO42mGOE/wJO363lTT1xHyODrS8CEw7Cm6EBs97FwrFRQdB04t89/1O/w1cDnyilFU=\\r\\n' +"}}
[info] >          'User-Agent: @line/bot-sdk/10.2.0\r\n' + {"user":"        'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'User-Agent: @line/bot-sdk/10.2.0\\r\\n' +"}}
[info] >          'Content-Length: 149\r\n' + {"user":"        'Content-Length: 149\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Content-Length: 149\\r\\n' +"}}
[info] >          'Accept-Encoding: gzip, compress, deflate, br\r\n' + {"user":"        'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Accept-Encoding: gzip, compress, deflate, br\\r\\n' +"}}
[info] >          'Host: api.line.me\r\n' + {"user":"        'Host: api.line.me\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Host: api.line.me\\r\\n' +"}}
[info] >          'Connection: keep-alive\r\n' + {"user":"        'Connection: keep-alive\\r\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         'Connection: keep-alive\\r\\n' +"}}
[info] >          '\r\n', {"user":"        '\\r\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\r\\n',"}}
[info] >        _keepAliveTimeout: 0, {"user":"      _keepAliveTimeout: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _keepAliveTimeout: 0,"}}
[info] >        _onPendingData: [Function: nop], {"user":"      _onPendingData: [Function: nop],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _onPendingData: [Function: nop],"}}
[info] >        agent: [Agent], {"user":"      agent: [Agent],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       agent: [Agent],"}}
[info] >        socketPath: undefined, {"user":"      socketPath: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       socketPath: undefined,"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        maxHeaderSize: undefined, {"user":"      maxHeaderSize: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeaderSize: undefined,"}}
[info] >        insecureHTTPParser: undefined, {"user":"      insecureHTTPParser: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       insecureHTTPParser: undefined,"}}
[info] >        joinDuplicateHeaders: undefined, {"user":"      joinDuplicateHeaders: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: undefined,"}}
[info] >        path: '/v2/bot/message/reply', {"user":"      path: '/v2/bot/message/reply',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       path: '/v2/bot/message/reply',"}}
[info] >        _ended: true, {"user":"      _ended: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _ended: true,"}}
[info] >        res: [IncomingMessage], {"user":"      res: [IncomingMessage],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [IncomingMessage],"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        timeoutCb: [Function: emitRequestTimeout], {"user":"      timeoutCb: [Function: emitRequestTimeout],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       timeoutCb: [Function: emitRequestTimeout],"}}
[info] >        upgradeOrConnect: false, {"user":"      upgradeOrConnect: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgradeOrConnect: false,"}}
[info] >        parser: null, {"user":"      parser: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       parser: null,"}}
[info] >        maxHeadersCount: null, {"user":"      maxHeadersCount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       maxHeadersCount: null,"}}
[info] >        reusedSocket: false, {"user":"      reusedSocket: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       reusedSocket: false,"}}
[info] >        host: 'api.line.me', {"user":"      host: 'api.line.me',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       host: 'api.line.me',"}}
[info] >        protocol: 'https:', {"user":"      protocol: 'https:',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       protocol: 'https:',"}}
[info] >        _redirectable: [Writable], {"user":"      _redirectable: [Writable],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       _redirectable: [Writable],"}}
[info] >        Symbol(shapeMode): false, {"user":"      Symbol(shapeMode): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(shapeMode): false,"}}
[info] >        Symbol(kCapture): false, {"user":"      Symbol(kCapture): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kCapture): false,"}}
[info] >        Symbol(kBytesWritten): 0, {"user":"      Symbol(kBytesWritten): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kBytesWritten): 0,"}}
[info] >        Symbol(kNeedDrain): false, {"user":"      Symbol(kNeedDrain): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kNeedDrain): false,"}}
[info] >        Symbol(corked): 0, {"user":"      Symbol(corked): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(corked): 0,"}}
[info] >        Symbol(kChunkedBuffer): [], {"user":"      Symbol(kChunkedBuffer): [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedBuffer): [],"}}
[info] >        Symbol(kChunkedLength): 0, {"user":"      Symbol(kChunkedLength): 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kChunkedLength): 0,"}}
[info] >        Symbol(kSocket): [TLSSocket], {"user":"      Symbol(kSocket): [TLSSocket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kSocket): [TLSSocket],"}}
[info] >        Symbol(kOutHeaders): [Object: null prototype], {"user":"      Symbol(kOutHeaders): [Object: null prototype],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kOutHeaders): [Object: null prototype],"}}
[info] >        Symbol(errored): null, {"user":"      Symbol(errored): null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(errored): null,"}}
[info] >        Symbol(kHighWaterMark): 65536, {"user":"      Symbol(kHighWaterMark): 65536,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kHighWaterMark): 65536,"}}
[info] >        Symbol(kRejectNonStandardBodyWrites): false, {"user":"      Symbol(kRejectNonStandardBodyWrites): false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kRejectNonStandardBodyWrites): false,"}}
[info] >        Symbol(kUniqueHeaders): null {"user":"      Symbol(kUniqueHeaders): null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       Symbol(kUniqueHeaders): null"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      response: { {"user":"    response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     response: {"}}
[info] >        status: 400, {"user":"      status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       status: 400,"}}
[info] >        statusText: 'Bad Request', {"user":"      statusText: 'Bad Request',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusText: 'Bad Request',"}}
[info] >        headers: [Object [AxiosHeaders]], {"user":"      headers: [Object [AxiosHeaders]],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       headers: [Object [AxiosHeaders]],"}}
[info] >        config: [Object], {"user":"      config: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       config: [Object],"}}
[info] >        request: [ClientRequest], {"user":"      request: [ClientRequest],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request: [ClientRequest],"}}
[info] >        data: [Object] {"user":"      data: [Object]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       data: [Object]"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      status: 400 {"user":"    status: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 400"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-08-30T20:13:59.785Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 735.424941ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 735.424941ms"}}
[debug] [2025-08-30T20:13:59.787Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: IDLE"}}
[debug] [2025-08-30T20:13:59.787Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:13:59.787Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:13:59.787Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:13:59.787Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:13:59.789Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8520

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:14:00.589Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:14:04.606Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:14:04.607Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: FINISHING"}}
[debug] [2025-08-30T20:14:04.623Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: exited"}}
[debug] [2025-08-30T20:14:04.623Z] [worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c83ceb6f-1ec4-4d2c-8db2-e7d8f9dc8e83]: FINISHED"}}
[debug] [2025-08-30T20:14:17.925Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:14:18.926Z] Validating nodejs source
[debug] [2025-08-30T20:14:19.391Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:14:19.391Z] Building nodejs source
[debug] [2025-08-30T20:14:19.391Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:14:19.392Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:14:19.393Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8151

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:14:20.063Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:14:27.715Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:14:27.774Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:14:28.775Z] Validating nodejs source
[debug] [2025-08-30T20:14:29.247Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:14:29.247Z] Building nodejs source
[debug] [2025-08-30T20:14:29.247Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:14:29.248Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:14:29.249Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8377

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:14:30.041Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:14:42.540Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:14:43.541Z] Validating nodejs source
[debug] [2025-08-30T20:14:43.994Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:14:43.994Z] Building nodejs source
[debug] [2025-08-30T20:14:43.994Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:14:43.996Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:14:43.998Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8290

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:14:44.716Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2025-08-30T20:14:47.498Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/-2025-08-30T20:14:47.498Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:14:47.498Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/-2025-08-30T20:14:47.498Z"],"workRunningCount":1}
[debug] [2025-08-30T20:14:47.498Z] Accepted request GET /stock-health-app/us-central1/api/ --> us-central1-api
[debug] [2025-08-30T20:14:47.500Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:14:47.500Z] [functions] Got req.url=/stock-health-app/us-central1/api/, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/, mapping to path=/"}}
[debug] [2025-08-30T20:14:47.500Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:14:47.502Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:14:47.502Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:14:48.185Z] [runtime-status] [26543] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:14:48.186Z] [runtime-status] [26543] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:14:48.186Z] [runtime-status] [26543] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:14:48.186Z] [runtime-status] [26543] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:14:48.395Z] [runtime-status] [26543] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:14:48.395Z] [runtime-status] [26543] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:14:48.396Z] [runtime-status] [26543] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:14:48.398Z] [runtime-status] [26543] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:14:48.399Z] [runtime-status] [26543] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:14:48.399Z] [runtime-status] [26543] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:14:48.756Z] [runtime-status] [26543] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:14:48.768Z] [runtime-status] [26543] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:14:48.768Z] [runtime-status] [26543] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_ff82253ac54f070d.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [26543] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_ff82253ac54f070d.sock"}}
[debug] [2025-08-30T20:14:48.822Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE"}}
[debug] [2025-08-30T20:14:48.822Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:14:48.822Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: BUSY"}}
[debug] [2025-08-30T20:14:48.829Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 6.585916ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 6.585916ms"}}
[debug] [2025-08-30T20:14:48.829Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE"}}
[debug] [2025-08-30T20:14:48.829Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:14:48.829Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:14:48.829Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:14:48.843Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-2025-08-30T20:14:48.843Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:14:48.843Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-2025-08-30T20:14:48.843Z"],"workRunningCount":1}
[debug] [2025-08-30T20:14:48.843Z] Accepted request GET /stock-health-app/us-central1/api/test --> us-central1-api
[debug] [2025-08-30T20:14:48.844Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:14:48.844Z] [functions] Got req.url=/stock-health-app/us-central1/api/test, mapping to path=/test {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test, mapping to path=/test"}}
[debug] [2025-08-30T20:14:48.844Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:14:48.844Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: BUSY"}}
[debug] [2025-08-30T20:14:48.846Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1.760025ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1.760025ms"}}
[debug] [2025-08-30T20:14:48.846Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE"}}
[debug] [2025-08-30T20:14:48.846Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:14:48.846Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:14:48.846Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:14:48.952Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:14:48.952Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:14:48.952Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:14:48.952Z"],"workRunningCount":1}
[debug] [2025-08-30T20:14:48.953Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:14:48.953Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:14:48.953Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:14:48.953Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:14:48.953Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  Using cached data for 2330.TW {"user":"Using cached data for 2330.TW","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Using cached data for 2330.TW"}}
[info] >  [Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`. {"user":"[Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m [Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`."}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[debug] [2025-08-30T20:14:49.748Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 794.163811ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 794.163811ms"}}
[debug] [2025-08-30T20:14:49.748Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE"}}
[debug] [2025-08-30T20:14:49.748Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:14:49.748Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:14:49.748Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:14:49.762Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:14:49.762Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:14:49.762Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:14:49.762Z"],"workRunningCount":1}
[debug] [2025-08-30T20:14:49.762Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:14:49.763Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:14:49.763Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:14:49.763Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:14:49.763Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: BUSY"}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:14:54 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:14:54 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:14:54 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: Tz/VnInS8fi {"user":"New crumb: Tz/VnInS8fi","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: Tz/VnInS8fi"}}
[info] >  ✅ 成功取得 0050.TW 的資料 {"user":"✅ 成功取得 0050.TW 的資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0050.TW 的資料"}}
[info] >  處理報價資料: 0050.TW { {"user":"處理報價資料: 0050.TW {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理報價資料: 0050.TW {"}}
[info] >    hasPrice: false, {"user":"  hasPrice: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasPrice: false,"}}
[info] >    hasRegularMarketPrice: true, {"user":"  hasRegularMarketPrice: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasRegularMarketPrice: true,"}}
[info] >    hasFundProfile: false, {"user":"  hasFundProfile: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasFundProfile: false,"}}
[info] >    hasAssetProfile: false {"user":"  hasAssetProfile: false","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasAssetProfile: false"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5 {"user":"處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5"}}
[info] >  Error fetching data for 0050.TW: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "data.marketCap"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`. {"user":"Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}}
[info] >  股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據 {"user":"股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據"}}
[info] >      at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:132:11) {"user":"    at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:132:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:132:11)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25) {"user":"    at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25)"}}
[info] >      at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16) {"user":"    at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5"}}
[debug] [2025-08-30T20:14:50.269Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 505.87624ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 505.87624ms"}}
[debug] [2025-08-30T20:14:50.269Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE"}}
[debug] [2025-08-30T20:14:50.269Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:14:50.269Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:14:50.270Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:15:36.074Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:15:36.074Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:15:36.074Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:15:36.074Z"],"workRunningCount":1}
[debug] [2025-08-30T20:15:36.074Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:15:36.075Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:15:36.075Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:15:36.075Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:15:36.076Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: BUSY"}}
[info] >  ✅ 成功取得 0050.TW 的資料 {"user":"✅ 成功取得 0050.TW 的資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0050.TW 的資料"}}
[info] >  處理報價資料: 0050.TW { {"user":"處理報價資料: 0050.TW {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理報價資料: 0050.TW {"}}
[info] >    hasPrice: false, {"user":"  hasPrice: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasPrice: false,"}}
[info] >    hasRegularMarketPrice: true, {"user":"  hasRegularMarketPrice: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasRegularMarketPrice: true,"}}
[info] >    hasFundProfile: false, {"user":"  hasFundProfile: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasFundProfile: false,"}}
[info] >    hasAssetProfile: false {"user":"  hasAssetProfile: false","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasAssetProfile: false"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5 {"user":"處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5"}}
[info] >  Error fetching data for 0050.TW: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "data.marketCap"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`. {"user":"Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}}
[info] >  股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據 {"user":"股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據"}}
[info] >      at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:132:11) {"user":"    at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:132:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:132:11)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25) {"user":"    at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25)"}}
[info] >      at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16) {"user":"    at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5"}}
[debug] [2025-08-30T20:15:36.343Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 267.486351ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 267.486351ms"}}
[debug] [2025-08-30T20:15:36.343Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: IDLE"}}
[debug] [2025-08-30T20:15:36.344Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:15:36.344Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:15:36.344Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:16:01.873Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:16:02.874Z] Validating nodejs source
[debug] [2025-08-30T20:16:03.659Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:16:03.660Z] Building nodejs source
[debug] [2025-08-30T20:16:03.660Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:16:03.661Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:16:03.663Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8248

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:16:04.413Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:16:08.432Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:16:08.432Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: FINISHING"}}
[debug] [2025-08-30T20:16:08.449Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: exited"}}
[debug] [2025-08-30T20:16:08.449Z] [worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8426a1bd-06da-419e-95b3-f618d2d13f2f]: FINISHED"}}
[debug] [2025-08-30T20:17:29.749Z] File /Users/sbu/Desktop/股健檢/functions/stockService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/stockService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:17:30.751Z] Validating nodejs source
[debug] [2025-08-30T20:17:31.356Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:17:31.356Z] Building nodejs source
[debug] [2025-08-30T20:17:31.356Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:17:31.356Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:17:31.358Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8814

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:17:32.046Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:17:41.442Z] File /Users/sbu/Desktop/股健檢/functions/stockService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/stockService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:17:42.443Z] Validating nodejs source
[debug] [2025-08-30T20:17:42.896Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:17:42.896Z] Building nodejs source
[debug] [2025-08-30T20:17:42.896Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:17:42.897Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:17:42.898Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8798

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:17:43.577Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:17:51.585Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:17:51.585Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:17:51.585Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:17:51.585Z"],"workRunningCount":1}
[debug] [2025-08-30T20:17:51.585Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:17:51.587Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:17:51.587Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:17:51.587Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:17:51.589Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:17:51.589Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:17:52.312Z] [runtime-status] [29000] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:17:52.313Z] [runtime-status] [29000] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:17:52.313Z] [runtime-status] [29000] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:17:52.314Z] [runtime-status] [29000] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:17:52.533Z] [runtime-status] [29000] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:17:52.533Z] [runtime-status] [29000] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:17:52.534Z] [runtime-status] [29000] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:17:52.536Z] [runtime-status] [29000] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:17:52.537Z] [runtime-status] [29000] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:17:52.537Z] [runtime-status] [29000] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:17:52.890Z] [runtime-status] [29000] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:17:52.901Z] [runtime-status] [29000] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:17:52.902Z] [runtime-status] [29000] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_10a1e44b97afe61f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29000] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_10a1e44b97afe61f.sock"}}
[debug] [2025-08-30T20:17:53.007Z] [worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: IDLE"}}
[debug] [2025-08-30T20:17:53.007Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:17:53.007Z] [worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:17:57 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:17:57 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:17:57 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: RD.osSZhKPY {"user":"New crumb: RD.osSZhKPY","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: RD.osSZhKPY"}}
[info] >  ✅ 成功取得 0050.TW 的資料 {"user":"✅ 成功取得 0050.TW 的資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0050.TW 的資料"}}
[info] >  處理報價資料: 0050.TW { {"user":"處理報價資料: 0050.TW {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理報價資料: 0050.TW {"}}
[info] >    hasPrice: false, {"user":"  hasPrice: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasPrice: false,"}}
[info] >    hasRegularMarketPrice: true, {"user":"  hasRegularMarketPrice: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasRegularMarketPrice: true,"}}
[info] >    hasFundProfile: false, {"user":"  hasFundProfile: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasFundProfile: false,"}}
[info] >    hasAssetProfile: false {"user":"  hasAssetProfile: false","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasAssetProfile: false"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5 {"user":"處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5"}}
[info] >  Error fetching data for 0050.TW: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "data.marketCap"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`. {"user":"Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}}
[info] >  股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據 {"user":"股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據"}}
[info] >      at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:152:11) {"user":"    at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:152:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:152:11)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25) {"user":"    at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25)"}}
[info] >      at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16) {"user":"    at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5"}}
[debug] [2025-08-30T20:17:54.054Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1046.670558ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1046.670558ms"}}
[debug] [2025-08-30T20:17:54.054Z] [worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: IDLE"}}
[debug] [2025-08-30T20:17:54.054Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:17:54.054Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:17:54.054Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:18:00.701Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:18:00.701Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:18:00.701Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:18:00.701Z"],"workRunningCount":1}
[debug] [2025-08-30T20:18:00.701Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:18:00.702Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:18:00.702Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:18:00.702Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:18:00.703Z] [worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: BUSY"}}
[info] >  ✅ 成功取得 0050.TW 的資料 {"user":"✅ 成功取得 0050.TW 的資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0050.TW 的資料"}}
[info] >  處理報價資料: 0050.TW { {"user":"處理報價資料: 0050.TW {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理報價資料: 0050.TW {"}}
[info] >    hasPrice: false, {"user":"  hasPrice: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasPrice: false,"}}
[info] >    hasRegularMarketPrice: true, {"user":"  hasRegularMarketPrice: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasRegularMarketPrice: true,"}}
[info] >    hasFundProfile: false, {"user":"  hasFundProfile: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasFundProfile: false,"}}
[info] >    hasAssetProfile: false {"user":"  hasAssetProfile: false","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasAssetProfile: false"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5 {"user":"處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5"}}
[info] >  Error fetching data for 0050.TW: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "data.marketCap"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`. {"user":"Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}}
[info] >  股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據 {"user":"股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股票 API 錯誤: Error: 無法取得 0050.TW 的股票數據"}}
[info] >      at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:152:11) {"user":"    at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:152:11)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:152:11)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25) {"user":"    at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25)"}}
[info] >      at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16) {"user":"    at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5"}}
[debug] [2025-08-30T20:18:01.051Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 347.755655ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 347.755655ms"}}
[debug] [2025-08-30T20:18:01.051Z] [worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: IDLE"}}
[debug] [2025-08-30T20:18:01.051Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:18:01.051Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:18:01.051Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:18:09.737Z] File /Users/sbu/Desktop/股健檢/functions/stockService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/stockService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:18:10.739Z] Validating nodejs source
[debug] [2025-08-30T20:18:11.220Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:18:11.220Z] Building nodejs source
[debug] [2025-08-30T20:18:11.220Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:18:11.221Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:18:11.223Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8013

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:18:11.920Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:18:15.938Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:18:15.938Z] [worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: FINISHING"}}
[debug] [2025-08-30T20:18:15.956Z] [worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: exited"}}
[debug] [2025-08-30T20:18:15.956Z] [worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3188351f-501c-43fc-af3f-46170fc16d46]: FINISHED"}}
[debug] [2025-08-30T20:18:20.101Z] File /Users/sbu/Desktop/股健檢/functions/stockService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/stockService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:18:21.101Z] Validating nodejs source
[debug] [2025-08-30T20:18:21.579Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:18:21.579Z] Building nodejs source
[debug] [2025-08-30T20:18:21.579Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:18:21.580Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:18:21.582Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8446

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:18:22.272Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:18:31.256Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:18:31.256Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:18:31.256Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:18:31.256Z"],"workRunningCount":1}
[debug] [2025-08-30T20:18:31.256Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:18:31.258Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:18:31.258Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:18:31.258Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:18:31.260Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:18:31.261Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:18:32.088Z] [runtime-status] [29928] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:18:32.089Z] [runtime-status] [29928] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:18:32.090Z] [runtime-status] [29928] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:18:32.090Z] [runtime-status] [29928] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:18:32.323Z] [runtime-status] [29928] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:18:32.324Z] [runtime-status] [29928] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:18:32.324Z] [runtime-status] [29928] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:18:32.326Z] [runtime-status] [29928] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:18:32.329Z] [runtime-status] [29928] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:18:32.329Z] [runtime-status] [29928] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:18:32.739Z] [runtime-status] [29928] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:18:32.752Z] [runtime-status] [29928] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:18:32.753Z] [runtime-status] [29928] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_cd58a2d8cc2984ed.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [29928] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_cd58a2d8cc2984ed.sock"}}
[debug] [2025-08-30T20:18:32.783Z] [worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: IDLE"}}
[debug] [2025-08-30T20:18:32.783Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:18:32.783Z] [worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:18:37 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:18:37 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:18:37 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: ZSdeoWKducb {"user":"New crumb: ZSdeoWKducb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: ZSdeoWKducb"}}
[info] >  ✅ 成功取得 0050.TW 的資料 {"user":"✅ 成功取得 0050.TW 的資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0050.TW 的資料"}}
[info] >  處理報價資料: 0050.TW { {"user":"處理報價資料: 0050.TW {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理報價資料: 0050.TW {"}}
[info] >    hasPrice: false, {"user":"  hasPrice: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasPrice: false,"}}
[info] >    hasRegularMarketPrice: true, {"user":"  hasRegularMarketPrice: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasRegularMarketPrice: true,"}}
[info] >    hasFundProfile: false, {"user":"  hasFundProfile: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasFundProfile: false,"}}
[info] >    hasAssetProfile: false {"user":"  hasAssetProfile: false","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasAssetProfile: false"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5 {"user":"處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理完成: 0050.TW - YUANTA SECURITIES INV TRUST CO  - 價格: 52.5"}}
[info] >  Error fetching data for 0050.TW: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "data.marketCap"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`. {"user":"Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching data for 0050.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}}
[info] >  股票 API 錯誤: ReferenceError: cachedData is not defined {"user":"股票 API 錯誤: ReferenceError: cachedData is not defined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股票 API 錯誤: ReferenceError: cachedData is not defined"}}
[info] >      at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:137:5) {"user":"    at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:137:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:137:5)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25) {"user":"    at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:254:25)"}}
[info] >      at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16) {"user":"    at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:138:16)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:80:28"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:77:5"}}
[debug] [2025-08-30T20:18:33.761Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 977.468282ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 977.468282ms"}}
[debug] [2025-08-30T20:18:33.761Z] [worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: IDLE"}}
[debug] [2025-08-30T20:18:33.761Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:18:33.761Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:18:33.761Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:19:19.312Z] File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:19:20.312Z] Validating nodejs source
[debug] [2025-08-30T20:19:20.884Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:19:20.884Z] Building nodejs source
[debug] [2025-08-30T20:19:20.884Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:19:20.885Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:19:20.887Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8527

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:19:21.680Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:19:25.697Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:19:25.697Z] [worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: FINISHING"}}
[debug] [2025-08-30T20:19:25.715Z] [worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: exited"}}
[debug] [2025-08-30T20:19:25.715Z] [worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-616468ce-a5dd-4b6e-9f82-c225e484af59]: FINISHED"}}
[debug] [2025-08-30T20:19:26.935Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:19:27.035Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:19:28.037Z] Validating nodejs source
[debug] [2025-08-30T20:19:28.516Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:19:28.517Z] Building nodejs source
[debug] [2025-08-30T20:19:28.517Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:19:28.517Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:19:28.519Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8039

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:19:29.259Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:19:49.604Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:19:50.605Z] Validating nodejs source
[debug] [2025-08-30T20:19:51.117Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:19:51.117Z] Building nodejs source
[debug] [2025-08-30T20:19:51.117Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:19:51.118Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:19:51.119Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8990

[error] /Users/sbu/Desktop/股健檢/functions/index.js:326
    } catch (apiError) {
      ^^^^^

SyntaxError: Unexpected token 'catch'
    at wrapSafe (node:internal/modules/cjs/loader:1669:18)
    at Module._compile (node:internal/modules/cjs/loader:1712:20)
    at Object..js (node:internal/modules/cjs/loader:1871:10)
    at Module.load (node:internal/modules/cjs/loader:1470:32)
    at Module._load (node:internal/modules/cjs/loader:1290:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:238:24)
    at Module.require (node:internal/modules/cjs/loader:1493:12)
    at require (node:internal/modules/helpers:152:16)
    at loadModule (/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/runtime/loader.js:40:16)

[debug] [2025-08-30T20:19:51.296Z] Got response code 400; body Failed to generate manifest from function source: Unexpected token 'catch'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2025-08-30T20:19:58.511Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:19:59.512Z] Validating nodejs source
[debug] [2025-08-30T20:19:59.951Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:19:59.952Z] Building nodejs source
[debug] [2025-08-30T20:19:59.952Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:19:59.952Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:19:59.953Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8399

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:20:00.681Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:20:11.822Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:20:11.822Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:20:11.822Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:20:11.822Z"],"workRunningCount":1}
[debug] [2025-08-30T20:20:11.822Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:20:11.824Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:20:11.824Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:20:11.824Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:20:11.827Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:20:11.828Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:20:12.528Z] [runtime-status] [31154] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:20:12.529Z] [runtime-status] [31154] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:20:12.529Z] [runtime-status] [31154] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:20:12.530Z] [runtime-status] [31154] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:20:12.747Z] [runtime-status] [31154] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:20:12.747Z] [runtime-status] [31154] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:20:12.748Z] [runtime-status] [31154] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:20:12.750Z] [runtime-status] [31154] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:20:12.752Z] [runtime-status] [31154] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:20:12.752Z] [runtime-status] [31154] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:20:13.109Z] [runtime-status] [31154] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:20:13.121Z] [runtime-status] [31154] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:20:13.121Z] [runtime-status] [31154] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_719ebd31dcfafb52.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [31154] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_719ebd31dcfafb52.sock"}}
[debug] [2025-08-30T20:20:13.145Z] [worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: IDLE"}}
[debug] [2025-08-30T20:20:13.145Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:20:13.145Z] [worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  🔍 開始取得 0050 ETF 資料... {"user":"🔍 開始取得 0050 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 0050 ETF 資料..."}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:20:18 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:20:18 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:20:18 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: zPGWpx5hAw5 {"user":"New crumb: zPGWpx5hAw5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: zPGWpx5hAw5"}}
[info] >  Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 0050 ETF 資料 {"user":"✅ 成功取得 0050 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0050 ETF 資料"}}
[debug] [2025-08-30T20:20:14.241Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1096.14907ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1096.14907ms"}}
[debug] [2025-08-30T20:20:14.241Z] [worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: IDLE"}}
[debug] [2025-08-30T20:20:14.241Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:20:14.241Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:20:14.241Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:20:23.599Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:20:23.599Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:20:23.600Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:20:23.599Z"],"workRunningCount":1}
[debug] [2025-08-30T20:20:23.600Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:20:23.601Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:20:23.601Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:20:23.601Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:20:23.601Z] [worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: BUSY"}}
[info] >  🔍 開始取得 0056 ETF 資料... {"user":"🔍 開始取得 0056 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 0056 ETF 資料..."}}
[info] >  Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 0056 ETF 資料 {"user":"✅ 成功取得 0056 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0056 ETF 資料"}}
[debug] [2025-08-30T20:20:23.808Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 207.190157ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 207.190157ms"}}
[debug] [2025-08-30T20:20:23.808Z] [worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: IDLE"}}
[debug] [2025-08-30T20:20:23.808Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:20:23.808Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:20:23.808Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:20:29.852Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:20:29.852Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:20:29.852Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:20:29.852Z"],"workRunningCount":1}
[debug] [2025-08-30T20:20:29.852Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:20:29.853Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:20:29.854Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:20:29.854Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:20:29.854Z] [worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: BUSY"}}
[info] >  ✅ 成功取得 00900.TW 的資料 {"user":"✅ 成功取得 00900.TW 的資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 00900.TW 的資料"}}
[info] >  處理報價資料: 00900.TW { {"user":"處理報價資料: 00900.TW {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理報價資料: 00900.TW {"}}
[info] >    hasPrice: false, {"user":"  hasPrice: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasPrice: false,"}}
[info] >    hasRegularMarketPrice: true, {"user":"  hasRegularMarketPrice: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasRegularMarketPrice: true,"}}
[info] >    hasFundProfile: false, {"user":"  hasFundProfile: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasFundProfile: false,"}}
[info] >    hasAssetProfile: false {"user":"  hasAssetProfile: false","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasAssetProfile: false"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  處理完成: 00900.TW - FUBON ASSET MANAGEMENT CO LTD T - 價格: 13.24 {"user":"處理完成: 00900.TW - FUBON ASSET MANAGEMENT CO LTD T - 價格: 13.24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理完成: 00900.TW - FUBON ASSET MANAGEMENT CO LTD T - 價格: 13.24"}}
[info] >  Error fetching data for 00900.TW: Value for argument "data" is not a valid Firestore document. Cannot use "undefined" as a Firestore value (found in field "data.marketCap"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`. {"user":"Error fetching data for 00900.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching data for 00900.TW: Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.marketCap\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}}
[info] >  股票 API 錯誤: ReferenceError: cachedData is not defined {"user":"股票 API 錯誤: ReferenceError: cachedData is not defined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股票 API 錯誤: ReferenceError: cachedData is not defined"}}
[info] >      at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:137:5) {"user":"    at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:137:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at getStockData (/Users/sbu/Desktop/股健檢/functions/stockService.js:137:5)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:272:27) {"user":"    at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:272:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestStockQuery (/Users/sbu/Desktop/股健檢/functions/index.js:272:27)"}}
[info] >      at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:143:16) {"user":"    at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:143:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:143:16)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:85:28 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:85:28","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:85:28"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:82:5 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:82:5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:82:5"}}
[debug] [2025-08-30T20:20:30.101Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 247.397154ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 247.397154ms"}}
[debug] [2025-08-30T20:20:30.101Z] [worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: IDLE"}}
[debug] [2025-08-30T20:20:30.101Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:20:30.101Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:20:30.101Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:20:36.656Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:20:37.656Z] Validating nodejs source
[debug] [2025-08-30T20:20:38.144Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:20:38.145Z] Building nodejs source
[debug] [2025-08-30T20:20:38.145Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:20:38.145Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:20:38.147Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8869

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:20:38.846Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:20:42.862Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:20:42.862Z] [worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: FINISHING"}}
[debug] [2025-08-30T20:20:42.879Z] [worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: exited"}}
[debug] [2025-08-30T20:20:42.879Z] [worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4dc4a931-4b3c-481a-8fcf-bf3c621c07fc]: FINISHED"}}
[debug] [2025-08-30T20:20:45.745Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:20:45.745Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:20:45.745Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:20:45.745Z"],"workRunningCount":1}
[debug] [2025-08-30T20:20:45.745Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:20:45.747Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:20:45.747Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:20:45.747Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:20:45.750Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:20:45.750Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:20:46.505Z] [runtime-status] [32458] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:20:46.506Z] [runtime-status] [32458] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:20:46.506Z] [runtime-status] [32458] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:20:46.507Z] [runtime-status] [32458] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:20:46.721Z] [runtime-status] [32458] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:20:46.721Z] [runtime-status] [32458] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:20:46.722Z] [runtime-status] [32458] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:20:46.724Z] [runtime-status] [32458] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:20:46.725Z] [runtime-status] [32458] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:20:46.725Z] [runtime-status] [32458] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:20:47.094Z] [runtime-status] [32458] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:20:47.106Z] [runtime-status] [32458] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:20:47.106Z] [runtime-status] [32458] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_3c2630e95fa6c24d.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [32458] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_3c2630e95fa6c24d.sock"}}
[debug] [2025-08-30T20:20:47.170Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE"}}
[debug] [2025-08-30T20:20:47.170Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:20:47.170Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  🔍 開始取得 00900 ETF 資料... {"user":"🔍 開始取得 00900 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 00900 ETF 資料..."}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:20:51 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:20:51 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:20:51 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: se5GQl6AaSA {"user":"New crumb: se5GQl6AaSA","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: se5GQl6AaSA"}}
[info] >  Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 00900 ETF 資料 {"user":"✅ 成功取得 00900 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 00900 ETF 資料"}}
[debug] [2025-08-30T20:20:48.115Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 944.920265ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 944.920265ms"}}
[debug] [2025-08-30T20:20:48.115Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE"}}
[debug] [2025-08-30T20:20:48.115Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:20:48.115Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:20:48.115Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:05.642Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/-2025-08-30T20:21:05.642Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:05.642Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/-2025-08-30T20:21:05.642Z"],"workRunningCount":1}
[debug] [2025-08-30T20:21:05.642Z] Accepted request GET /stock-health-app/us-central1/api/ --> us-central1-api
[debug] [2025-08-30T20:21:05.643Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:21:05.643Z] [functions] Got req.url=/stock-health-app/us-central1/api/, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/, mapping to path=/"}}
[debug] [2025-08-30T20:21:05.643Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:21:05.643Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY"}}
[debug] [2025-08-30T20:21:05.645Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1.72599ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1.72599ms"}}
[debug] [2025-08-30T20:21:05.645Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE"}}
[debug] [2025-08-30T20:21:05.645Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:21:05.645Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:21:05.645Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:05.659Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-2025-08-30T20:21:05.659Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:05.660Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-2025-08-30T20:21:05.659Z"],"workRunningCount":1}
[debug] [2025-08-30T20:21:05.660Z] Accepted request GET /stock-health-app/us-central1/api/test --> us-central1-api
[debug] [2025-08-30T20:21:05.661Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:21:05.661Z] [functions] Got req.url=/stock-health-app/us-central1/api/test, mapping to path=/test {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test, mapping to path=/test"}}
[debug] [2025-08-30T20:21:05.661Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:21:05.661Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY"}}
[debug] [2025-08-30T20:21:05.662Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1.382397ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1.382397ms"}}
[debug] [2025-08-30T20:21:05.663Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE"}}
[debug] [2025-08-30T20:21:05.663Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:21:05.663Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:21:05.663Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:05.678Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:05.678Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:05.678Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:05.678Z"],"workRunningCount":1}
[debug] [2025-08-30T20:21:05.678Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:21:05.679Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:21:05.679Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:21:05.679Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:21:05.680Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY"}}
[info] >  🔍 開始取得 2330 ETF 資料... {"user":"🔍 開始取得 2330 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 2330 ETF 資料..."}}
[info] >  ✅ 成功取得 2330 ETF 資料 {"user":"✅ 成功取得 2330 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 2330 ETF 資料"}}
[debug] [2025-08-30T20:21:05.895Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 215.213221ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 215.213221ms"}}
[debug] [2025-08-30T20:21:05.895Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE"}}
[debug] [2025-08-30T20:21:05.895Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:21:05.895Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:21:05.895Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:05.909Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:05.909Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:05.909Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:05.909Z"],"workRunningCount":1}
[debug] [2025-08-30T20:21:05.909Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:21:05.910Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:21:05.910Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:21:05.910Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:21:05.910Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY"}}
[info] >  🔍 開始取得 0050 ETF 資料... {"user":"🔍 開始取得 0050 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 0050 ETF 資料..."}}
[info] >  Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 0050 ETF 資料 {"user":"✅ 成功取得 0050 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0050 ETF 資料"}}
[debug] [2025-08-30T20:21:06.131Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 221.280939ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 221.280939ms"}}
[debug] [2025-08-30T20:21:06.131Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE"}}
[debug] [2025-08-30T20:21:06.131Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:21:06.132Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:21:06.132Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:06.147Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:06.147Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:06.147Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:06.147Z"],"workRunningCount":1}
[debug] [2025-08-30T20:21:06.147Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:21:06.147Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:21:06.147Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:21:06.147Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:21:06.147Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY"}}
[info] >  🔍 開始取得 0056 ETF 資料... {"user":"🔍 開始取得 0056 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 0056 ETF 資料..."}}
[info] >  Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 0056 ETF 資料 {"user":"✅ 成功取得 0056 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0056 ETF 資料"}}
[debug] [2025-08-30T20:21:06.298Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 150.670883ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 150.670883ms"}}
[debug] [2025-08-30T20:21:06.298Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE"}}
[debug] [2025-08-30T20:21:06.298Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:21:06.298Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:21:06.298Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:06.313Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:06.313Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:06.313Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:06.313Z"],"workRunningCount":1}
[debug] [2025-08-30T20:21:06.313Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:21:06.314Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:21:06.314Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:21:06.314Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:21:06.314Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: BUSY"}}
[info] >  🔍 開始取得 00900 ETF 資料... {"user":"🔍 開始取得 00900 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 00900 ETF 資料..."}}
[info] >  Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 00900 ETF 資料 {"user":"✅ 成功取得 00900 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 00900 ETF 資料"}}
[debug] [2025-08-30T20:21:06.446Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 131.894702ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 131.894702ms"}}
[debug] [2025-08-30T20:21:06.446Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: IDLE"}}
[debug] [2025-08-30T20:21:06.446Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:21:06.446Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:21:06.446Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:11.484Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:21:12.484Z] Validating nodejs source
[debug] [2025-08-30T20:21:13.019Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:21:13.019Z] Building nodejs source
[debug] [2025-08-30T20:21:13.019Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:21:13.021Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:21:13.023Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8753

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:21:13.754Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:21:17.770Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:21:17.770Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: FINISHING"}}
[debug] [2025-08-30T20:21:17.787Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: exited"}}
[debug] [2025-08-30T20:21:17.787Z] [worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6c03a56-f5de-48ac-9925-f95f33caf81f]: FINISHED"}}
[debug] [2025-08-30T20:21:20.556Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:20.556Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:20.556Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:20.556Z"],"workRunningCount":1}
[debug] [2025-08-30T20:21:20.556Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:21:20.558Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:21:20.558Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:21:20.558Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:21:20.560Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:21:20.560Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:21:21.256Z] [runtime-status] [33091] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:21:21.257Z] [runtime-status] [33091] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:21:21.257Z] [runtime-status] [33091] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:21:21.258Z] [runtime-status] [33091] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:21:21.482Z] [runtime-status] [33091] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:21:21.482Z] [runtime-status] [33091] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:21:21.482Z] [runtime-status] [33091] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:21:21.484Z] [runtime-status] [33091] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:21:21.486Z] [runtime-status] [33091] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:21:21.486Z] [runtime-status] [33091] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:21:21.853Z] [runtime-status] [33091] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:21:21.864Z] [runtime-status] [33091] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:21:21.864Z] [runtime-status] [33091] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_1df8f02c33778539.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33091] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_1df8f02c33778539.sock"}}
[debug] [2025-08-30T20:21:21.878Z] [worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: IDLE"}}
[debug] [2025-08-30T20:21:21.878Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:21:21.878Z] [worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  🔍 開始取得 2330 ETF 資料... {"user":"🔍 開始取得 2330 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 2330 ETF 資料..."}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:21:26 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:21:26 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:21:26 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: q6SXY2BGwbO {"user":"New crumb: q6SXY2BGwbO","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: q6SXY2BGwbO"}}
[info] >  ✅ 成功取得 2330 ETF 資料 {"user":"✅ 成功取得 2330 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 2330 ETF 資料"}}
[debug] [2025-08-30T20:21:22.775Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 897.12263ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 897.12263ms"}}
[debug] [2025-08-30T20:21:22.776Z] [worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: IDLE"}}
[debug] [2025-08-30T20:21:22.776Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:21:22.776Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:21:22.776Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:36.376Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:21:37.376Z] Validating nodejs source
[debug] [2025-08-30T20:21:37.836Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:21:37.836Z] Building nodejs source
[debug] [2025-08-30T20:21:37.836Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:21:37.837Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:21:37.839Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8190

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:21:38.536Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:21:42.552Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:21:42.553Z] [worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: FINISHING"}}
[debug] [2025-08-30T20:21:42.574Z] [worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: exited"}}
[debug] [2025-08-30T20:21:42.575Z] [worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ddfe499-aa21-4b93-bb2b-11ddfe7e3566]: FINISHED"}}
[debug] [2025-08-30T20:21:54.376Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:54.376Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:21:54.376Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:21:54.376Z"],"workRunningCount":1}
[debug] [2025-08-30T20:21:54.376Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:21:54.377Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:21:54.377Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:21:54.377Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:21:54.379Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:21:54.379Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:21:55.313Z] [runtime-status] [33793] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:21:55.314Z] [runtime-status] [33793] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:21:55.315Z] [runtime-status] [33793] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:21:55.315Z] [runtime-status] [33793] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:21:55.550Z] [runtime-status] [33793] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:21:55.550Z] [runtime-status] [33793] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:21:55.551Z] [runtime-status] [33793] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:21:55.553Z] [runtime-status] [33793] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:21:55.554Z] [runtime-status] [33793] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:21:55.554Z] [runtime-status] [33793] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:21:55.920Z] [runtime-status] [33793] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:21:55.932Z] [runtime-status] [33793] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:21:55.932Z] [runtime-status] [33793] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_91a19906022eaa28.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [33793] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_91a19906022eaa28.sock"}}
[debug] [2025-08-30T20:21:56.003Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE"}}
[debug] [2025-08-30T20:21:56.003Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:21:56.003Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:22:00 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:22:00 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:22:00 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: HVjFFjBhbTr {"user":"New crumb: HVjFFjBhbTr","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: HVjFFjBhbTr"}}
[info] >  ✅ 成功取得 2330.TW 的資料 {"user":"✅ 成功取得 2330.TW 的資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 2330.TW 的資料"}}
[info] >  處理報價資料: 2330.TW { {"user":"處理報價資料: 2330.TW {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理報價資料: 2330.TW {"}}
[info] >    hasPrice: false, {"user":"  hasPrice: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasPrice: false,"}}
[info] >    hasRegularMarketPrice: true, {"user":"  hasRegularMarketPrice: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasRegularMarketPrice: true,"}}
[info] >    hasFundProfile: false, {"user":"  hasFundProfile: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasFundProfile: false,"}}
[info] >    hasAssetProfile: false {"user":"  hasAssetProfile: false","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasAssetProfile: false"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  處理完成: 2330.TW - TAIWAN SEMICONDUCTOR MANUFACTUR - 價格: 1160 {"user":"處理完成: 2330.TW - TAIWAN SEMICONDUCTOR MANUFACTUR - 價格: 1160","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理完成: 2330.TW - TAIWAN SEMICONDUCTOR MANUFACTUR - 價格: 1160"}}
[info] >  [Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`. {"user":"[Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m [Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`."}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[debug] [2025-08-30T20:21:57.206Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1202.792476ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1202.792476ms"}}
[debug] [2025-08-30T20:21:57.206Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE"}}
[debug] [2025-08-30T20:21:57.206Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:21:57.206Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:21:57.206Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:00.944Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/-2025-08-30T20:22:00.944Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:00.945Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/-2025-08-30T20:22:00.944Z"],"workRunningCount":1}
[debug] [2025-08-30T20:22:00.945Z] Accepted request GET /stock-health-app/us-central1/api/ --> us-central1-api
[debug] [2025-08-30T20:22:00.946Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:22:00.946Z] [functions] Got req.url=/stock-health-app/us-central1/api/, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/, mapping to path=/"}}
[debug] [2025-08-30T20:22:00.946Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:22:00.946Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY"}}
[debug] [2025-08-30T20:22:00.948Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1.888316ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1.888316ms"}}
[debug] [2025-08-30T20:22:00.948Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE"}}
[debug] [2025-08-30T20:22:00.948Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:22:00.948Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:22:00.948Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:00.962Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-2025-08-30T20:22:00.962Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:00.962Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-2025-08-30T20:22:00.962Z"],"workRunningCount":1}
[debug] [2025-08-30T20:22:00.962Z] Accepted request GET /stock-health-app/us-central1/api/test --> us-central1-api
[debug] [2025-08-30T20:22:00.963Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:22:00.963Z] [functions] Got req.url=/stock-health-app/us-central1/api/test, mapping to path=/test {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test, mapping to path=/test"}}
[debug] [2025-08-30T20:22:00.963Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:22:00.963Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY"}}
[debug] [2025-08-30T20:22:00.965Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1.888783ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1.888783ms"}}
[debug] [2025-08-30T20:22:00.965Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE"}}
[debug] [2025-08-30T20:22:00.965Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:22:00.965Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:22:00.965Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:00.980Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:22:00.980Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:00.980Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:22:00.980Z"],"workRunningCount":1}
[debug] [2025-08-30T20:22:00.980Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:22:00.981Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:22:00.981Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:22:00.981Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:22:00.981Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY"}}
[info] >  Using cached data for 2330.TW {"user":"Using cached data for 2330.TW","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Using cached data for 2330.TW"}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[debug] [2025-08-30T20:22:01.249Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 267.903142ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 267.903142ms"}}
[debug] [2025-08-30T20:22:01.249Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE"}}
[debug] [2025-08-30T20:22:01.250Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:22:01.250Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:22:01.250Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:01.265Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:22:01.265Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:01.265Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:22:01.265Z"],"workRunningCount":1}
[debug] [2025-08-30T20:22:01.265Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:22:01.265Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:22:01.266Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:22:01.266Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:22:01.266Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY"}}
[info] >  🔍 開始取得 0050 ETF 資料... {"user":"🔍 開始取得 0050 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 0050 ETF 資料..."}}
[info] >  Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 0050 ETF 資料 {"user":"✅ 成功取得 0050 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0050 ETF 資料"}}
[debug] [2025-08-30T20:22:01.427Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 161.049945ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 161.049945ms"}}
[debug] [2025-08-30T20:22:01.427Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE"}}
[debug] [2025-08-30T20:22:01.427Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:22:01.427Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:22:01.427Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:01.442Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:22:01.442Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:01.442Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:22:01.442Z"],"workRunningCount":1}
[debug] [2025-08-30T20:22:01.442Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:22:01.442Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:22:01.442Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:22:01.442Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:22:01.442Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY"}}
[info] >  🔍 開始取得 0056 ETF 資料... {"user":"🔍 開始取得 0056 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 0056 ETF 資料..."}}
[info] >  Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0056: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 0056 ETF 資料 {"user":"✅ 成功取得 0056 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0056 ETF 資料"}}
[debug] [2025-08-30T20:22:01.578Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 135.387695ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 135.387695ms"}}
[debug] [2025-08-30T20:22:01.578Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE"}}
[debug] [2025-08-30T20:22:01.578Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:22:01.578Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:22:01.578Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:01.593Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:22:01.593Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:01.593Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:22:01.593Z"],"workRunningCount":1}
[debug] [2025-08-30T20:22:01.593Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:22:01.593Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:22:01.593Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:22:01.593Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:22:01.594Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: BUSY"}}
[info] >  🔍 開始取得 00900 ETF 資料... {"user":"🔍 開始取得 00900 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 00900 ETF 資料..."}}
[info] >  Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00900: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 00900 ETF 資料 {"user":"✅ 成功取得 00900 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 00900 ETF 資料"}}
[debug] [2025-08-30T20:22:01.724Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 130.902903ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 130.902903ms"}}
[debug] [2025-08-30T20:22:01.725Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: IDLE"}}
[debug] [2025-08-30T20:22:01.725Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:22:01.725Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:22:01.725Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:22:09.944Z] File /Users/sbu/Desktop/股健檢/functions/stockService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/stockService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:22:09.944Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:22:09.944Z] File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:22:10.944Z] Validating nodejs source
[debug] [2025-08-30T20:22:11.510Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:22:11.511Z] Building nodejs source
[debug] [2025-08-30T20:22:11.511Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:22:11.511Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:22:11.513Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8647

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:22:12.245Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:22:16.262Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:22:16.262Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: FINISHING"}}
[debug] [2025-08-30T20:22:16.279Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: exited"}}
[debug] [2025-08-30T20:22:16.279Z] [worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-efa77b29-bbb5-4409-b615-5a41cac9a2f1]: FINISHED"}}
[debug] [2025-08-30T20:22:21.844Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:22:22.844Z] Validating nodejs source
[debug] [2025-08-30T20:22:23.287Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:22:23.287Z] Building nodejs source
[debug] [2025-08-30T20:22:23.287Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:22:23.288Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:22:23.289Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8638

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:22:23.956Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:22:51.211Z] File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:22:52.212Z] Validating nodejs source
[debug] [2025-08-30T20:22:53.333Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:22:53.333Z] Building nodejs source
[debug] [2025-08-30T20:22:53.333Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:22:53.334Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:22:53.335Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8201

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:22:54.040Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:23:03.483Z] File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:23:04.484Z] Validating nodejs source
[debug] [2025-08-30T20:23:04.946Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:23:04.946Z] Building nodejs source
[debug] [2025-08-30T20:23:04.946Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:23:04.947Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:23:04.948Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8718

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:23:05.638Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:23:14.355Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:23:14.355Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:23:14.356Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:23:14.355Z"],"workRunningCount":1}
[debug] [2025-08-30T20:23:14.356Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:23:14.357Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:23:14.357Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:23:14.357Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:23:14.359Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:23:14.359Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:23:15.270Z] [runtime-status] [34767] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:23:15.271Z] [runtime-status] [34767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:23:15.271Z] [runtime-status] [34767] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:23:15.272Z] [runtime-status] [34767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:23:15.492Z] [runtime-status] [34767] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:23:15.492Z] [runtime-status] [34767] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:23:15.492Z] [runtime-status] [34767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:23:15.494Z] [runtime-status] [34767] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:23:15.496Z] [runtime-status] [34767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:23:15.496Z] [runtime-status] [34767] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:23:15.854Z] [runtime-status] [34767] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:23:15.865Z] [runtime-status] [34767] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:23:15.866Z] [runtime-status] [34767] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_d97fb5bac6224b87.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [34767] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_d97fb5bac6224b87.sock"}}
[debug] [2025-08-30T20:23:15.936Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: IDLE"}}
[debug] [2025-08-30T20:23:15.937Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:23:15.937Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  Using cached data for 2330.TW {"user":"Using cached data for 2330.TW","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Using cached data for 2330.TW"}}
[info] >  [Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`. {"user":"[Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m [Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`."}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[debug] [2025-08-30T20:23:16.728Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 791.341352ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 791.341352ms"}}
[debug] [2025-08-30T20:23:16.729Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: IDLE"}}
[debug] [2025-08-30T20:23:16.729Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:23:16.729Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:23:16.729Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:23:24.806Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:23:24.806Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:23:24.807Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:23:24.806Z"],"workRunningCount":1}
[debug] [2025-08-30T20:23:24.807Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:23:24.808Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:23:24.808Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:23:24.808Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:23:24.808Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: BUSY"}}
[info] >  🔍 開始取得 00878 ETF 資料... {"user":"🔍 開始取得 00878 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 00878 ETF 資料..."}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:23:29 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:23:29 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:23:29 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: mIJLZmjObgU {"user":"New crumb: mIJLZmjObgU","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: mIJLZmjObgU"}}
[info] >  Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 00878 ETF 資料 {"user":"✅ 成功取得 00878 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 00878 ETF 資料"}}
[debug] [2025-08-30T20:23:25.327Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 518.945984ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 518.945984ms"}}
[debug] [2025-08-30T20:23:25.327Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: IDLE"}}
[debug] [2025-08-30T20:23:25.327Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:23:25.327Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:23:25.327Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:23:35.035Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:23:35.035Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:23:35.035Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:23:35.035Z"],"workRunningCount":1}
[debug] [2025-08-30T20:23:35.035Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:23:35.036Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:23:35.036Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:23:35.036Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:23:35.036Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: BUSY"}}
[info] >  🔍 開始取得 00919 ETF 資料... {"user":"🔍 開始取得 00919 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 00919 ETF 資料..."}}
[info] >  Yahoo Finance 資料取得失敗 00919: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00919: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00919: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 00919: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00919: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00919: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 00919 ETF 資料 {"user":"✅ 成功取得 00919 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 00919 ETF 資料"}}
[debug] [2025-08-30T20:23:35.219Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 182.917064ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 182.917064ms"}}
[debug] [2025-08-30T20:23:35.219Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: IDLE"}}
[debug] [2025-08-30T20:23:35.219Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:23:35.219Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:23:35.220Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:23:45.035Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:23:45.035Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:23:45.035Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:23:45.035Z"],"workRunningCount":1}
[debug] [2025-08-30T20:23:45.036Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:23:45.038Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:23:45.038Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:23:45.039Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:23:45.039Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: BUSY"}}
[info] >  🔍 開始取得 00929 ETF 資料... {"user":"🔍 開始取得 00929 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 00929 ETF 資料..."}}
[info] >  Yahoo Finance 資料取得失敗 00929: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00929: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00929: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 00929: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00929: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00929: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 00929 ETF 資料 {"user":"✅ 成功取得 00929 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 00929 ETF 資料"}}
[debug] [2025-08-30T20:23:45.220Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 181.325774ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 181.325774ms"}}
[debug] [2025-08-30T20:23:45.220Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: IDLE"}}
[debug] [2025-08-30T20:23:45.220Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:23:45.220Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:23:45.220Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:24:02.867Z] File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:24:03.868Z] Validating nodejs source
[debug] [2025-08-30T20:24:04.392Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:24:04.392Z] Building nodejs source
[debug] [2025-08-30T20:24:04.392Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:24:04.393Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:24:04.394Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8864

[error] ReferenceError: getETFData is not defined
    at Object.<anonymous> (/Users/sbu/Desktop/股健檢/functions/etfDataService.js:132:3)
    at Module._compile (node:internal/modules/cjs/loader:1738:14)
    at Object..js (node:internal/modules/cjs/loader:1871:10)
    at Module.load (node:internal/modules/cjs/loader:1470:32)
    at Module._load (node:internal/modules/cjs/loader:1290:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:238:24)
    at Module.require (node:internal/modules/cjs/loader:1493:12)
    at require (node:internal/modules/helpers:152:16)
    at Object.<anonymous> (/Users/sbu/Desktop/股健檢/functions/index.js:25:5)

[debug] [2025-08-30T20:24:05.118Z] Got response code 400; body Failed to generate manifest from function source: getETFData is not defined
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2025-08-30T20:25:50.851Z] File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:25:51.853Z] Validating nodejs source
[debug] [2025-08-30T20:25:52.350Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:25:52.350Z] Building nodejs source
[debug] [2025-08-30T20:25:52.350Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:25:52.351Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:25:52.352Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8323

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:25:53.081Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:25:57.097Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:25:57.097Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: FINISHING"}}
[debug] [2025-08-30T20:25:57.110Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: exited"}}
[debug] [2025-08-30T20:25:57.110Z] [worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-aa48806f-3314-4ec3-b0a7-bf6ec8c21668]: FINISHED"}}
[debug] [2025-08-30T20:26:01.261Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:26:02.262Z] Validating nodejs source
[debug] [2025-08-30T20:26:02.805Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:26:02.806Z] Building nodejs source
[debug] [2025-08-30T20:26:02.806Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:26:02.807Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:26:02.809Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8725

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:26:03.574Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:26:15.648Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:26:15.648Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:26:15.649Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:26:15.648Z"],"workRunningCount":1}
[debug] [2025-08-30T20:26:15.649Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:26:15.650Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:26:15.650Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:26:15.650Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:26:15.654Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:26:15.654Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:26:16.444Z] [runtime-status] [37277] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:26:16.445Z] [runtime-status] [37277] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:26:16.446Z] [runtime-status] [37277] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:26:16.447Z] [runtime-status] [37277] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:26:16.700Z] [runtime-status] [37277] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:26:16.701Z] [runtime-status] [37277] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:26:16.704Z] [runtime-status] [37277] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:26:16.710Z] [runtime-status] [37277] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:26:16.713Z] [runtime-status] [37277] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:26:16.717Z] [runtime-status] [37277] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:26:17.136Z] [runtime-status] [37277] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:26:17.150Z] [runtime-status] [37277] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:26:17.150Z] [runtime-status] [37277] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_faa6a33b5d63d21a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37277] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_faa6a33b5d63d21a.sock"}}
[debug] [2025-08-30T20:26:17.180Z] [worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: IDLE"}}
[debug] [2025-08-30T20:26:17.180Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:26:17.180Z] [worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  測試訊息處理錯誤: ReferenceError: formatETFLookupTable is not defined {"user":"測試訊息處理錯誤: ReferenceError: formatETFLookupTable is not defined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 測試訊息處理錯誤: ReferenceError: formatETFLookupTable is not defined"}}
[info] >      at handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:158:15) {"user":"    at handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:158:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at handleTestMessage (/Users/sbu/Desktop/股健檢/functions/index.js:158:15)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:85:28 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:85:28","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:85:28"}}
[info] >      at async Promise.all (index 0) {"user":"    at async Promise.all (index 0)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Promise.all (index 0)"}}
[info] >      at async /Users/sbu/Desktop/股健檢/functions/index.js:82:5 {"user":"    at async /Users/sbu/Desktop/股健檢/functions/index.js:82:5","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async /Users/sbu/Desktop/股健檢/functions/index.js:82:5"}}
[debug] [2025-08-30T20:26:17.699Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 518.490985ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 518.490985ms"}}
[debug] [2025-08-30T20:26:17.699Z] [worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: IDLE"}}
[debug] [2025-08-30T20:26:17.699Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:26:17.699Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:26:17.699Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:26:22.185Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:26:23.185Z] Validating nodejs source
[debug] [2025-08-30T20:26:23.697Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:26:23.697Z] Building nodejs source
[debug] [2025-08-30T20:26:23.697Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:26:23.698Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:26:23.700Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8290

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:26:24.412Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:26:28.428Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:26:28.428Z] [worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: FINISHING"}}
[debug] [2025-08-30T20:26:28.443Z] [worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: exited"}}
[debug] [2025-08-30T20:26:28.443Z] [worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-01b364e2-b33f-4672-96b9-49fbb1c31758]: FINISHED"}}
[debug] [2025-08-30T20:26:31.994Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:26:31.994Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:26:31.994Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:26:31.994Z"],"workRunningCount":1}
[debug] [2025-08-30T20:26:31.994Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:26:31.995Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:26:31.995Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:26:31.995Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:26:31.997Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:26:31.997Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:26:32.674Z] [runtime-status] [37723] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:26:32.675Z] [runtime-status] [37723] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:26:32.675Z] [runtime-status] [37723] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:26:32.676Z] [runtime-status] [37723] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:26:32.885Z] [runtime-status] [37723] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:26:32.886Z] [runtime-status] [37723] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:26:32.886Z] [runtime-status] [37723] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:26:32.888Z] [runtime-status] [37723] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:26:32.889Z] [runtime-status] [37723] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:26:32.889Z] [runtime-status] [37723] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:26:33.219Z] [runtime-status] [37723] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:26:33.230Z] [runtime-status] [37723] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:26:33.231Z] [runtime-status] [37723] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_96e22b3a7a8a8ad9.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [37723] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_96e22b3a7a8a8ad9.sock"}}
[debug] [2025-08-30T20:26:33.314Z] [worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: IDLE"}}
[debug] [2025-08-30T20:26:33.314Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:26:33.314Z] [worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[debug] [2025-08-30T20:26:33.722Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 408.398156ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 408.398156ms"}}
[debug] [2025-08-30T20:26:33.722Z] [worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: IDLE"}}
[debug] [2025-08-30T20:26:33.722Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:26:33.723Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:26:33.723Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:26:41.668Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:26:41.668Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:26:41.668Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:26:41.668Z"],"workRunningCount":1}
[debug] [2025-08-30T20:26:41.668Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:26:41.669Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:26:41.669Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:26:41.669Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:26:41.669Z] [worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: BUSY"}}
[info] >  🔍 開始取得 00878 ETF 資料... {"user":"🔍 開始取得 00878 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 00878 ETF 資料..."}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:26:46 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:26:46 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:26:46 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: gsFwYI6GwVI {"user":"New crumb: gsFwYI6GwVI","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: gsFwYI6GwVI"}}
[info] >  Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 00878: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 00878 ETF 資料 {"user":"✅ 成功取得 00878 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 00878 ETF 資料"}}
[debug] [2025-08-30T20:26:42.236Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 566.849045ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 566.849045ms"}}
[debug] [2025-08-30T20:26:42.236Z] [worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: IDLE"}}
[debug] [2025-08-30T20:26:42.236Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:26:42.236Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:26:42.236Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:26:50.272Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:26:50.369Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:26:51.370Z] Validating nodejs source
[debug] [2025-08-30T20:26:51.895Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:26:51.896Z] Building nodejs source
[debug] [2025-08-30T20:26:51.896Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:26:51.896Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:26:51.897Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8123

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:26:52.690Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2025-08-30T20:26:53.403Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:26:54.403Z] Validating nodejs source
[debug] [2025-08-30T20:26:54.907Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:26:54.907Z] Building nodejs source
[debug] [2025-08-30T20:26:54.907Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:26:54.907Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:26:54.909Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8676

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:26:55.641Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:26:56.708Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:26:56.708Z] [worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: FINISHING"}}
[debug] [2025-08-30T20:26:56.724Z] [worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: exited"}}
[debug] [2025-08-30T20:26:56.724Z] [worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4c4cf7f3-c03a-4129-b0c2-cc55eef7494a]: FINISHED"}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:30:09.410Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:30:09.492Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:30:10.493Z] Validating nodejs source
[debug] [2025-08-30T20:30:11.119Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:30:11.119Z] Building nodejs source
[debug] [2025-08-30T20:30:11.119Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:30:11.120Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:30:11.122Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8985

[error] /Users/sbu/Desktop/股健檢/functions/index.js:446
    } catch (apiError) {
      ^^^^^

SyntaxError: Unexpected token 'catch'
    at wrapSafe (node:internal/modules/cjs/loader:1669:18)
    at Module._compile (node:internal/modules/cjs/loader:1712:20)
    at Object..js (node:internal/modules/cjs/loader:1871:10)
    at Module.load (node:internal/modules/cjs/loader:1470:32)
    at Module._load (node:internal/modules/cjs/loader:1290:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:238:24)
    at Module.require (node:internal/modules/cjs/loader:1493:12)
    at require (node:internal/modules/helpers:152:16)
    at loadModule (/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/runtime/loader.js:40:16)

[debug] [2025-08-30T20:30:11.314Z] Got response code 400; body Failed to generate manifest from function source: Unexpected token 'catch'
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2025-08-30T20:30:15.780Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:30:16.782Z] Validating nodejs source
[debug] [2025-08-30T20:30:17.325Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:30:17.325Z] Building nodejs source
[debug] [2025-08-30T20:30:17.326Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:30:17.327Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:30:17.329Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8579

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:30:18.050Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:30:25.756Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:30:25.756Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:30:25.756Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:30:25.756Z"],"workRunningCount":1}
[debug] [2025-08-30T20:30:25.756Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:30:25.757Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:30:25.757Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:30:25.757Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:30:25.759Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-08-30T20:30:25.759Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2025-08-30T20:30:26.440Z] [runtime-status] [41666] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:30:26.441Z] [runtime-status] [41666] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:30:26.441Z] [runtime-status] [41666] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-08-30T20:30:26.441Z] [runtime-status] [41666] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:30:26.660Z] [runtime-status] [41666] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-08-30T20:30:26.661Z] [runtime-status] [41666] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}}"}}
[debug] [2025-08-30T20:30:26.661Z] [runtime-status] [41666] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:30:26.663Z] [runtime-status] [41666] Resolved module firebase-admin {"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-08-30T20:30:26.664Z] [runtime-status] [41666] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.4.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.4.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-functions/lib/v2/index.js\"}"}}
[debug] [2025-08-30T20:30:26.665Z] [runtime-status] [41666] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"13.5.0","resolution":"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"13.5.0\",\"resolution\":\"/Users/sbu/Desktop/股健檢/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-08-30T20:30:27.008Z] [runtime-status] [41666] initializeApp(DEFAULT) {"storageBucket":"stock-health-app.firebasestorage.app","projectId":"stock-health-app"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] initializeApp(DEFAULT) {\"storageBucket\":\"stock-health-app.firebasestorage.app\",\"projectId\":\"stock-health-app\"}"}}
[info] >  LINE Bot 初始化成功 {"user":"LINE Bot 初始化成功","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m LINE Bot 初始化成功"}}
[info] >  股健檢 LINE Bot 伺服器已初始化 {"user":"股健檢 LINE Bot 伺服器已初始化","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 股健檢 LINE Bot 伺服器已初始化"}}
[debug] [2025-08-30T20:30:27.019Z] [runtime-status] [41666] Functions runtime initialized. {"cwd":"/Users/sbu/Desktop/股健檢/functions","node_version":"24.5.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] Functions runtime initialized. {\"cwd\":\"/Users/sbu/Desktop/股健檢/functions\",\"node_version\":\"24.5.0\"}"}}
[debug] [2025-08-30T20:30:27.020Z] [runtime-status] [41666] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_1439a31129fec203.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [41666] Listening to port: /var/folders/jp/jhx6_9gd73vg7yqw248kccdh0000gn/T/fire_emu_1439a31129fec203.sock"}}
[debug] [2025-08-30T20:30:27.077Z] [worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: IDLE"}}
[debug] [2025-08-30T20:30:27.077Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:30:27.077Z] [worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: BUSY"}}
[warn] ⚠  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  🔍 開始取得 0050 ETF 資料... {"user":"🔍 開始取得 0050 ETF 資料...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 開始取得 0050 ETF 資料..."}}
[info] >  Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`. {"user":"Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Please consider completing the survey at https://bit.ly/yahoo-finance-api-feedback if you haven't already; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/764#issuecomment-2056623851.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['yahooSurvey'])`."}}
[info] >  Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL... {"user":"Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Fetching crumb and cookies from https://finance.yahoo.com/quote/AAPL..."}}
[info] >  We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/ {"user":"We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We expected a redirect to guce.yahoo.com, but got https://finance.yahoo.com/quote/AAPL/"}}
[info] >  We'll try to continue anyway - you can safely ignore this if the request succeeds {"user":"We'll try to continue anyway - you can safely ignore this if the request succeeds","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m We'll try to continue anyway - you can safely ignore this if the request succeeds"}}
[info] >  Success. Cookie expires on Mon Aug 31 2026 02:30:32 GMT+0000 (世界標準時間) {"user":"Success. Cookie expires on Mon Aug 31 2026 02:30:32 GMT+0000 (世界標準時間)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Success. Cookie expires on Mon Aug 31 2026 02:30:32 GMT+0000 (世界標準時間)"}}
[info] >  fetch https://query1.finance.yahoo.com/v1/test/getcrumb {"user":"fetch https://query1.finance.yahoo.com/v1/test/getcrumb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m fetch https://query1.finance.yahoo.com/v1/test/getcrumb"}}
[info] >  New crumb: JRITvwPgzie {"user":"New crumb: JRITvwPgzie","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m New crumb: JRITvwPgzie"}}
[info] >  Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol') {"user":"Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Yahoo Finance 資料取得失敗 0050: Cannot read properties of undefined (reading 'symbol')"}}
[info] >  ✅ 成功取得 0050 ETF 資料 {"user":"✅ 成功取得 0050 ETF 資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 0050 ETF 資料"}}
[debug] [2025-08-30T20:30:28.946Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1868.366943ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1868.366943ms"}}
[debug] [2025-08-30T20:30:28.946Z] [worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: IDLE"}}
[debug] [2025-08-30T20:30:28.946Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:30:28.946Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:30:28.946Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:30:38.977Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:30:38.977Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:30:38.978Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/test-webhook-2025-08-30T20:30:38.977Z"],"workRunningCount":1}
[debug] [2025-08-30T20:30:38.978Z] Accepted request POST /stock-health-app/us-central1/api/test-webhook --> us-central1-api
[debug] [2025-08-30T20:30:38.978Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:30:38.979Z] [functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/test-webhook, mapping to path=/test-webhook"}}
[debug] [2025-08-30T20:30:38.979Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:30:38.979Z] [worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: BUSY"}}
[info] >  ✅ 成功取得 2330.TW 的資料 {"user":"✅ 成功取得 2330.TW 的資料","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ 成功取得 2330.TW 的資料"}}
[info] >  處理報價資料: 2330.TW { {"user":"處理報價資料: 2330.TW {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理報價資料: 2330.TW {"}}
[info] >    hasPrice: false, {"user":"  hasPrice: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasPrice: false,"}}
[info] >    hasRegularMarketPrice: true, {"user":"  hasRegularMarketPrice: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasRegularMarketPrice: true,"}}
[info] >    hasFundProfile: false, {"user":"  hasFundProfile: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasFundProfile: false,"}}
[info] >    hasAssetProfile: false {"user":"  hasAssetProfile: false","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   hasAssetProfile: false"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  處理完成: 2330.TW - TAIWAN SEMICONDUCTOR MANUFACTUR - 價格: 1160 {"user":"處理完成: 2330.TW - TAIWAN SEMICONDUCTOR MANUFACTUR - 價格: 1160","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 處理完成: 2330.TW - TAIWAN SEMICONDUCTOR MANUFACTUR - 價格: 1160"}}
[info] >  [Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`. {"user":"[Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m [Deprecated] historical() relies on an API that Yahoo have removed.  We'll map this request to chart() for convenience, but, please consider using chart() directly instead; for more info see https://github.com/gadicc/node-yahoo-finance2/issues/795.  This will only be shown once, but you can suppress this message in future with `yahooFinance.suppressNotices(['ripHistorical'])`."}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[info] >  Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type {"user":"Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error fetching historical data for 2330.TW: Parameter=period1 has an invalid type"}}
[debug] [2025-08-30T20:30:40.157Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1177.936791ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1177.936791ms"}}
[debug] [2025-08-30T20:30:40.157Z] [worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: IDLE"}}
[debug] [2025-08-30T20:30:40.157Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:30:40.157Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:30:40.157Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:30:51.419Z] [work-queue] {"queuedWork":["/stock-health-app/us-central1/api/webhook-2025-08-30T20:30:51.418Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-08-30T20:30:51.419Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/stock-health-app/us-central1/api/webhook-2025-08-30T20:30:51.418Z"],"workRunningCount":1}
[debug] [2025-08-30T20:30:51.419Z] Accepted request POST /stock-health-app/us-central1/api/webhook --> us-central1-api
[debug] [2025-08-30T20:30:51.420Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-08-30T20:30:51.420Z] [functions] Got req.url=/stock-health-app/us-central1/api/webhook, mapping to path=/webhook {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/stock-health-app/us-central1/api/webhook, mapping to path=/webhook"}}
[debug] [2025-08-30T20:30:51.420Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-08-30T20:30:51.420Z] [worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: BUSY"}}
[debug] [2025-08-30T20:30:51.422Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2.673929ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2.673929ms"}}
[debug] [2025-08-30T20:30:51.423Z] [worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: IDLE"}}
[debug] [2025-08-30T20:30:51.423Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-08-30T20:30:51.423Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-08-30T20:30:51.423Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  SignatureValidationFailed: signature validation failed {"user":"SignatureValidationFailed: signature validation failed","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m SignatureValidationFailed: signature validation failed"}}
[info] >      at _middleware (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/middleware.js:71:18) {"user":"    at _middleware (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/middleware.js:71:18)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at _middleware (/Users/sbu/Desktop/股健檢/functions/node_modules/@line/bot-sdk/dist/cjs/middleware.js:71:18)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
[debug] [2025-08-30T20:31:02.306Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:31:03.308Z] Validating nodejs source
[debug] [2025-08-30T20:31:03.801Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:31:03.801Z] Building nodejs source
[debug] [2025-08-30T20:31:03.801Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:31:03.802Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:31:03.803Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8513

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:31:04.507Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:31:08.524Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2025-08-30T20:31:08.524Z] [worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: FINISHING"}}
[debug] [2025-08-30T20:31:08.542Z] [worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: exited"}}
[debug] [2025-08-30T20:31:08.542Z] [worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-303730da-b2c4-45c3-a844-8b06234f2816]: FINISHED"}}
[debug] [2025-08-30T20:32:02.593Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:32:03.595Z] Validating nodejs source
[debug] [2025-08-30T20:32:04.087Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:32:04.088Z] Building nodejs source
[debug] [2025-08-30T20:32:04.088Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:32:04.089Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:32:04.091Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8906

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:32:04.837Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:34:12.487Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:34:13.489Z] Validating nodejs source
[debug] [2025-08-30T20:34:14.190Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:34:14.190Z] Building nodejs source
[debug] [2025-08-30T20:34:14.190Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:34:14.191Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:34:14.192Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8610

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:34:15.020Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:41:21.838Z] File /Users/sbu/Desktop/股健檢/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/package-lock.json changed, reloading triggers"}}
[debug] [2025-08-30T20:41:22.839Z] Validating nodejs source
[debug] [2025-08-30T20:41:23.400Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:41:23.400Z] Building nodejs source
[debug] [2025-08-30T20:41:23.400Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:41:23.401Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:41:23.402Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8905

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:41:24.131Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:43:52.868Z] File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/etfDataService.js changed, reloading triggers"}}
[debug] [2025-08-30T20:43:53.868Z] Validating nodejs source
[debug] [2025-08-30T20:43:54.403Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:43:54.403Z] Building nodejs source
[debug] [2025-08-30T20:43:54.403Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:43:54.404Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:43:54.406Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8891

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:43:55.155Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2025-08-30T20:44:07.047Z] File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/sbu/Desktop/股健檢/functions/index.js changed, reloading triggers"}}
[debug] [2025-08-30T20:44:08.048Z] Validating nodejs source
[debug] [2025-08-30T20:44:08.551Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "engines": {
    "node": "24"
  },
  "scripts": {
    "test": "echo \"錯誤: 未來將添加測試\" && npm run local-test",
    "build": "echo '✅ 建置檢查完成'",
    "debug": "node debug index.js",
    "lint": "eslint *.js --ext .js",
    "lint:fix": "eslint *.js --ext .js --fix",
    "format": "prettier --write *.js",
    "format:check": "prettier --check *.js",
    "ci": "../scripts/ci-check.sh",
    "verify": "npm run build && npm run lint && npm run format:check && echo '🔍 驗證環境變數...' && node -e \"if(!require('fs').existsSync('.env')){console.error('❌ .env 檔案遺失！'); process.exit(1);}else{console.log('✅ .env 檔案存在');}\"",
    "local-test": "node -e \"require('dotenv').config(); require('./index.js'); console.log('✅ 本地語法檢查通過');\"",
    "analyze": "npm run lint && npm run format:check && npm run build && echo '✅ 分析完成 - 準備部署！'",
    "deploy:staging": "firebase deploy --only functions --project stock-health-staging",
    "deploy:production": "firebase deploy --only functions --project stock-health-app",
    "health-check": "node -e \"console.log('🔍 健康檢查端點: http://localhost:5001/stock-health-app/us-central1/api/health')\""
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@line/bot-sdk": "^10.2.0",
    "axios": "^1.11.0",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^5.1.0",
    "firebase-admin": "^13.5.0",
    "firebase-functions": "^6.4.0",
    "yahoo-finance2": "^2.13.3"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^2.1.4",
    "eslint": "^8.57.0",
    "prettier": "^3.3.3"
  }
}
[debug] [2025-08-30T20:44:08.551Z] Building nodejs source
[debug] [2025-08-30T20:44:08.551Z] Failed to find version of module node: reached end of search path /Users/sbu/Desktop/股健檢/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "22" doesn't match your global version "24". Using node@24 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-08-30T20:44:08.553Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-30T20:44:08.555Z] Found firebase-functions binary at '/Users/sbu/Desktop/股健檢/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8989

[info] LINE Bot 初始化成功

[info] 股健檢 LINE Bot 伺服器已初始化

[debug] [2025-08-30T20:44:09.293Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":5,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
